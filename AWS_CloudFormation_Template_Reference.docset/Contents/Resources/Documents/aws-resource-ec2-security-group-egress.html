<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-ec2-security-group-egress">AWS::EC2::SecurityGroupEgress</h1><p>The <code class="code">AWS::EC2::SecurityGroupEgress</code> resource adds an egress rule to an Amazon VPC
                        security group. When you use the <code class="code">AWS::EC2::SecurityGroupEgress</code> resource, the default rule is removed from the
                        security group.
                     </p><div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>Use <code class="code">AWS::EC2::SecurityGroupIngress</code> and
                           <code class="code">AWS::EC2::SecurityGroupEgress</code> only when necessary, typically to allow
                           security groups to reference each other in ingress and egress rules. Otherwise, use
                           the
                           embedded ingress and egress rules of <a href="aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a>. For more information, see <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html" target="_blank">Amazon EC2 Security
                              Groups</a>.
                        </p>
                     </div><div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-ec2-securitygroupegress-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c21c10d481c11">Properties</a></li>
                           <li><a href="#w2ab2c21c10d481c13">Return Values</a></li>
                           <li><a href="#w2ab2c21c10d481c15">VPC Security Groups Example</a></li>
                        </ul>
                     </div><h2 id="aws-resource-ec2-securitygroupegress-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-ec2-securitygroupegress-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::EC2::SecurityGroupEgress&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-cidrip"><code class="literal">CidrIp</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-cidripv6"><code class="code">CidrIpv6</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-description"><code class="literal">Description</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-destinationprefixlistid"><code class="code">DestinationPrefixListId</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-destinationsecuritygroupid"><code class="literal">DestinationSecurityGroupId</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-fromport"><code class="literal">FromPort</code></a>&quot; : <em class="replaceable"><code>Integer</code></em>,
    &quot;<a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-groupid"><code class="literal">GroupId</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-ipprotocol"><code class="literal">IpProtocol</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-toport"><code class="literal">ToPort</code></a>&quot; : <em class="replaceable"><code>Integer</code></em>
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-ec2-securitygroupegress-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">
Type: &quot;AWS::EC2::SecurityGroupEgress&quot;
Properties:
  <a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-cidrip"><code class="literal">CidrIp</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-cidripv6"><code class="code">CidrIpv6</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-description"><code class="literal">Description</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-destinationprefixlistid"><code class="code">DestinationPrefixListId</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-destinationsecuritygroupid"><code class="literal">DestinationSecurityGroupId</code></a>:  <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-fromport"><code class="literal">FromPort</code></a>: <em class="replaceable"><code>Integer</code></em>
  <a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-groupid"><code class="literal">GroupId</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-ipprotocol"><code class="literal">IpProtocol</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-security-group-egress.html#cfn-ec2-securitygroupegress-toport"><code class="literal">ToPort</code></a>: <em class="replaceable"><code>Integer</code></em>
</code></pre>
                        </div><h2 id="w2ab2c21c10d481c11">Properties</h2><p>For more information about adding egress rules to VPC security groups, go to <a href="http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-AuthorizeSecurityGroupEgress.html" target="_blank">AuthorizeSecurityGroupEgress</a> in the <em>Amazon EC2 API Reference</em>.
                     </p><div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>If you change this resource&apos;s logical ID, you must also update a property value in
                           order to trigger an update for this resource.
                        </p>
                     </div><div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-ec2-securitygroupegress-cidrip"></a><span class="term"><code class="literal">CidrIp</code></span></dt>
                           
                           <dd>
                              
                              <p>An IPv4 CIDR range.</p>
                              
                              <p><em>Required</em>: Conditional. You must specify a destination security group
                                 (<code class="code">DestinationPrefixListId</code> or <code class="code">DestinationSecurityGroupId</code>) or a
                                 CIDR range (<code class="code">CidrIp</code> or <code class="code">CidrIpv6</code>).
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-securitygroupegress-cidripv6"></a><span class="term"><code class="code">CidrIpv6</code></span></dt>
                           
                           <dd>
                              
                              <p>An IPv6 CIDR range.</p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Required</em>: Conditional. You must specify a destination security group
                                 (<code class="code">DestinationPrefixListId</code> or <code class="code">DestinationSecurityGroupId</code>) or a
                                 CIDR range (<code class="code">CidrIp</code> or <code class="code">CidrIpv6</code>).
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-securitygroupegress-description"></a><span class="term"><code class="literal">Description</code></span></dt>
                           
                           <dd>
                              
                              <p>Description of the egress rule.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: 
                                 <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-securitygroupegress-destinationprefixlistid"></a><span class="term"><code class="code">DestinationPrefixListId</code></span></dt>
                           
                           <dd>
                              
                              <p>The AWS service prefix of an Amazon VPC endpoint. For more information, see <a href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-endpoints.html" target="_blank">VPC Endpoints</a> in the
                                 <em>Amazon VPC User Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: Conditional. You must specify a destination security group
                                 (<code class="code">DestinationPrefixListId</code> or <code class="code">DestinationSecurityGroupId</code>) or a
                                 CIDR range (<code class="code">CidrIp</code> or <code class="code">CidrIpv6</code>).
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-securitygroupegress-destinationsecuritygroupid"></a><span class="term"><code class="literal">DestinationSecurityGroupId</code></span></dt>
                           
                           <dd>
                              
                              <p>Specifies the group ID of the destination Amazon VPC security group.</p>
                              
                              <p><em>Required</em>: Conditional. You must specify a destination security group
                                 (<code class="code">DestinationPrefixListId</code> or <code class="code">DestinationSecurityGroupId</code>) or a
                                 CIDR range (<code class="code">CidrIp</code> or <code class="code">CidrIpv6</code>).
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-securitygroupegress-fromport"></a><span class="term"><code class="literal">FromPort</code></span></dt>
                           
                           <dd>
                              
                              <p>Start of port range for the TCP and UDP protocols, or an ICMP type number. If
                                 you specify <code class="code">icmp</code> for the <code class="code">IpProtocol</code> property, you can
                                 specify -1 as a wildcard (i.e., any ICMP type number).
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: Integer
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-securitygroupegress-groupid"></a><span class="term"><code class="literal">GroupId</code></span></dt>
                           
                           <dd>
                              
                              <p>ID of the Amazon VPC security group to modify. This value can be a reference to an
                                 <a href="aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a> resource that has a
                                 valid <code class="code">VpcId</code> property or the ID of an existing Amazon VPC security group.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-securitygroupegress-ipprotocol"></a><span class="term"><code class="literal">IpProtocol</code></span></dt>
                           
                           <dd>
                              
                              <p>IP protocol name or number. For valid values, see the IpProtocol parameter in <a href="http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-AuthorizeSecurityGroupIngress.html" target="_blank">AuthorizeSecurityGroupIngress</a></p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-securitygroupegress-toport"></a><span class="term"><code class="literal">ToPort</code></span></dt>
                           
                           <dd>
                              
                              <p>End of port range for the TCP and UDP protocols, or an ICMP code. If you
                                 specify <code class="code">icmp</code> for the <code class="code">IpProtocol</code> property, you can
                                 specify -1 as a wildcard (i.e., any ICMP code).
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: Integer
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div><h2 id="w2ab2c21c10d481c13">Return Values</h2><h3 id="w2ab2c21c10d481c13b2">Ref</h3><p>When the logical ID of this resource is provided to the <code class="code">Ref</code> intrinsic
                        function, <code class="code">Ref</code> returns the resource name.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="w2ab2c21c10d481c15">VPC Security Groups Example</h2><p>In some cases, you might have an originating (source) security group to which you
                        want
                        to add an outbound rule that allows traffic to a destination (target) security group.
                        The
                        target security group also needs an inbound rule that allows traffic from the source
                        security
                        group. Note that you cannot use the <code class="code">Ref</code> function to specify the outbound and
                        inbound rules for each security group. Doing so creates a circular dependency; you
                        cannot have
                        two resources that depend on each other. Instead, use the egress and ingress resources
                        to
                        declare these outbound and inbound rules, as shown in the following template snippet.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-ec2-securitygroupegress-example-1.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
  &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
  &quot;Resources&quot;: {
    &quot;SourceSG&quot;: {
      &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,
      &quot;Properties&quot;: {
        &quot;VpcId&quot; : &quot;vpc-e063f789&quot;,
        &quot;GroupDescription&quot;: &quot;Sample source security group&quot;
      }
    },
    &quot;TargetSG&quot;: {
      &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,
      &quot;Properties&quot;: {
        &quot;VpcId&quot; : &quot;vpc-e063f789&quot;,
        &quot;GroupDescription&quot;: &quot;Sample target security group&quot;
      }
    },
    &quot;OutboundRule&quot;: {
      &quot;Type&quot;: &quot;AWS::EC2::SecurityGroupEgress&quot;,
      &quot;Properties&quot;:{
        &quot;IpProtocol&quot;: &quot;tcp&quot;,
        &quot;FromPort&quot;: &quot;0&quot;,
        &quot;ToPort&quot;: &quot;65535&quot;,
        &quot;DestinationSecurityGroupId&quot;: {
          &quot;Fn::GetAtt&quot;: [
            &quot;TargetSG&quot;,
            &quot;GroupId&quot;
          ]
        },
        &quot;GroupId&quot;: {
          &quot;Fn::GetAtt&quot;: [
            &quot;SourceSG&quot;,
            &quot;GroupId&quot;
          ]
        }
      }
    },
    &quot;InboundRule&quot;: {
      &quot;Type&quot;: &quot;AWS::EC2::SecurityGroupIngress&quot;,
      &quot;Properties&quot;:{
        &quot;IpProtocol&quot;: &quot;tcp&quot;,
        &quot;FromPort&quot;: &quot;0&quot;,
        &quot;ToPort&quot;: &quot;65535&quot;,
        &quot;SourceSecurityGroupId&quot;: {
          &quot;Fn::GetAtt&quot;: [
            &quot;SourceSG&quot;,
            &quot;GroupId&quot;
          ]
        },
        &quot;GroupId&quot;: {
          &quot;Fn::GetAtt&quot;: [
            &quot;TargetSG&quot;,
            &quot;GroupId&quot;
          ]
        }
      }
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-ec2-securitygroupegress-example-1.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">AWSTemplateFormatVersion: &apos;2010-09-09&apos;
Resources:
  SourceSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      VpcId: vpc-e063f789
      GroupDescription: Sample source security group
  TargetSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      VpcId: vpc-e063f789
      GroupDescription: Sample target security group
  OutboundRule:
    Type: AWS::EC2::SecurityGroupEgress
    Properties:
      IpProtocol: tcp
      FromPort: &apos;0&apos;
      ToPort: &apos;65535&apos;
      DestinationSecurityGroupId:
        Fn::GetAtt:
        - TargetSG
        - GroupId
      GroupId:
        Fn::GetAtt:
        - SourceSG
        - GroupId
  InboundRule:
    Type: AWS::EC2::SecurityGroupIngress
    Properties:
      IpProtocol: tcp
      FromPort: &apos;0&apos;
      ToPort: &apos;65535&apos;
      SourceSecurityGroupId:
        Fn::GetAtt:
        - SourceSG
        - GroupId
      GroupId:
        Fn::GetAtt:
        - TargetSG
        - GroupId</code></pre>
                        </div></div>
</body>
</html>