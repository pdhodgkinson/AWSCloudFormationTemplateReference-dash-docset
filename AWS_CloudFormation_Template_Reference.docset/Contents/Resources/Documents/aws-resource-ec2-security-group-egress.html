<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-ec2-security-group-egress">AWS::EC2::SecurityGroupEgress</h1><p>[EC2-VPC only] Adds the specified egress rules to a security group for use with a
                        VPC.
                     </p><p>An outbound rule permits instances to send traffic to the specified destination IPv4
                        or
                        IPv6 CIDR address ranges, or to the specified destination security groups for the
                        same VPC.
                     </p><p>You specify a protocol for each rule (for example, TCP). 
                        For the TCP and UDP protocols, you must also specify the destination port or port
                        range. 
                        For the ICMP protocol, you must also specify the ICMP type and code. 
                        You can use -1 for the type or code to mean all types or all codes.
                     </p><p>Rule changes are propagated to affected instances as quickly as possible. However,
                        a small delay might occur.
                     </p><p>For more information about VPC security group limits, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/amazon-vpc-limits.html">Amazon VPC Limits</a>.
                     </p><p>Use <code class="code">AWS::EC2::SecurityGroupIngress</code> and
                        <code class="code">AWS::EC2::SecurityGroupEgress</code> only when necessary, typically to allow
                        security groups to reference each other in ingress and egress rules. Otherwise, use
                        the
                        embedded ingress and egress rules of the security group. For more information, see
                        <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html">Amazon EC2 Security
                           Groups</a>.
                     </p><h2 id="aws-resource-ec2-security-group-egress-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-ec2-security-group-egress-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Type&quot; : &quot;AWS::EC2::SecurityGroupEgress&quot;,
  &quot;Properties&quot; : {
      &quot;<a href="#cfn-ec2-securitygroupegress-cidrip">CidrIp</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-securitygroupegress-cidripv6">CidrIpv6</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-securitygroupegress-description">Description</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-securitygroupegress-destinationprefixlistid">DestinationPrefixListId</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-securitygroupegress-destinationsecuritygroupid">DestinationSecurityGroupId</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-securitygroupegress-fromport">FromPort</a>&quot; : <em class="replaceable"><code>Integer</code></em>,
      &quot;<a href="#cfn-ec2-securitygroupegress-groupid">GroupId</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-securitygroupegress-ipprotocol">IpProtocol</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-securitygroupegress-toport">ToPort</a>&quot; : <em class="replaceable"><code>Integer</code></em>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-ec2-security-group-egress-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Type: AWS::EC2::SecurityGroupEgress
Properties: 
  <a href="#cfn-ec2-securitygroupegress-cidrip">CidrIp</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-securitygroupegress-cidripv6">CidrIpv6</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-securitygroupegress-description">Description</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-securitygroupegress-destinationprefixlistid">DestinationPrefixListId</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-securitygroupegress-destinationsecuritygroupid">DestinationSecurityGroupId</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-securitygroupegress-fromport">FromPort</a>: <em class="replaceable"><code>Integer</code></em>
  <a href="#cfn-ec2-securitygroupegress-groupid">GroupId</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-securitygroupegress-ipprotocol">IpProtocol</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-securitygroupegress-toport">ToPort</a>: <em class="replaceable"><code>Integer</code></em>
</code></pre></div><h2 id="aws-resource-ec2-security-group-egress-properties">Properties</h2><div class="variablelist">
                        <dl>
                           <dt><a id="cfn-ec2-securitygroupegress-cidrip"></a><span class="term"><code class="code">CidrIp</code></span></dt>
                           <dd>
                              
                              <p>The IPv4 ranges.</p>
                              
                              <p>You must specify a destination security group
                                 (<code class="code">DestinationPrefixListId</code> or <code class="code">DestinationSecurityGroupId</code>) or a
                                 CIDR range (<code class="code">CidrIp</code> or <code class="code">CidrIpv6</code>).
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroupegress-cidripv6"></a><span class="term"><code class="code">CidrIpv6</code></span></dt>
                           <dd>
                              
                              <p>The IPv6 ranges.</p>
                              
                              <p>You must specify a destination security group
                                 (<code class="code">DestinationPrefixListId</code> or <code class="code">DestinationSecurityGroupId</code>) or a
                                 CIDR range (<code class="code">CidrIp</code> or <code class="code">CidrIpv6</code>).
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroupegress-description"></a><span class="term"><code class="code">Description</code></span></dt>
                           <dd>
                              		
                              <p>The description of an egress (outbound) security group rule.</p>
                              	
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroupegress-destinationprefixlistid"></a><span class="term"><code class="code">DestinationPrefixListId</code></span></dt>
                           <dd>
                              
                              <p>[EC2-VPC only] The prefix list IDs for an AWS service. This is the AWS service that
                                 you
                                 want to access through a VPC endpoint from instances associated with the security
                                 group.
                              </p>
                              
                              <p>You must specify a destination security group
                                 (<code class="code">DestinationPrefixListId</code> or <code class="code">DestinationSecurityGroupId</code>) or a
                                 CIDR range (<code class="code">CidrIp</code> or <code class="code">CidrIpv6</code>).
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroupegress-destinationsecuritygroupid"></a><span class="term"><code class="code">DestinationSecurityGroupId</code></span></dt>
                           <dd>
                              
                              <p>The ID of the security group.</p>
                              
                              <p>You must specify a destination security group
                                 (<code class="code">DestinationPrefixListId</code> or <code class="code">DestinationSecurityGroupId</code>) or a
                                 CIDR range (<code class="code">CidrIp</code> or <code class="code">CidrIpv6</code>).
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroupegress-fromport"></a><span class="term"><code class="code">FromPort</code></span></dt>
                           <dd>
                              
                              <p>The start of port range for the TCP and UDP protocols, or an ICMP/ICMPv6 type number.
                                 A value of <code class="code">-1</code> indicates all ICMP/ICMPv6 types. If you specify all
                                 		ICMP/ICMPv6 types, you must specify all codes.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Integer
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroupegress-groupid"></a><span class="term"><code class="code">GroupId</code></span></dt>
                           <dd>
                              		       
                              <p>The ID of the security group. You must specify either the security group ID or the
                                 			security group name in the request. For security groups in a nondefault VPC, you
                                 must
                                 			specify the security group ID.
                              </p>
                              	     
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroupegress-ipprotocol"></a><span class="term"><code class="code">IpProtocol</code></span></dt>
                           <dd>
                              
                              <p>The IP protocol name (<code class="code">tcp</code>, <code class="code">udp</code>, <code class="code">icmp</code>, <code class="code">icmpv6</code>) 
                                 or number (see <a href="http://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml" target="_blank">Protocol Numbers</a>).
                              </p>
                              
                              <p>[VPC only] Use <code class="code">-1</code> to specify all protocols. When authorizing
                                 security group rules, specifying <code class="code">-1</code> or a protocol number other than
                                 <code class="code">tcp</code>, <code class="code">udp</code>, <code class="code">icmp</code>, or <code class="code">icmpv6</code> allows
                                 traffic on all ports, regardless of any port range you specify. For <code class="code">tcp</code>,
                                 <code class="code">udp</code>, and <code class="code">icmp</code>, you must specify a port range. For <code class="code">icmpv6</code>,
                                 the port range is optional; if you omit the port range, traffic for all types and
                                 codes is allowed.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroupegress-toport"></a><span class="term"><code class="code">ToPort</code></span></dt>
                           <dd>
                              
                              <p>The end of port range for the TCP and UDP protocols, or an ICMP/ICMPv6 code. A value
                                 		of <code class="code">-1</code> indicates all ICMP/ICMPv6 codes. If you specify all ICMP/ICMPv6 types, 
                                 you must specify all codes.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Integer
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                        </dl>
                     </div><h2 id="aws-resource-ec2-security-group-egress-return-values">Return Values</h2><h3 id="aws-resource-ec2-security-group-egress-return-values-ref">Ref</h3><p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the name of the security egress rule.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="aws-resource-ec2-security-group-egress--examples">Examples</h2><h3 id="aws-resource-ec2-security-group-egress--examples--VPC_Security_Groups_Example">VPC Security Groups Example</h3><p>In some cases, you might have an originating (source) security group to which you
                        want
                        to add an outbound rule that allows traffic to a destination (target) security group.
                        The
                        target security group also needs an inbound rule that allows traffic from the source
                        security
                        group. Note that you cannot use the <code class="code">Ref</code> function to specify the outbound and
                        inbound rules for each security group. Doing so creates a circular dependency; you
                        cannot have
                        two resources that depend on each other. Instead, use the egress and ingress resources
                        to
                        declare these outbound and inbound rules, as shown in the following template example.
                     </p><h4 id="aws-resource-ec2-security-group-egress--examples--VPC_Security_Groups_Example--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;SourceSG&quot;: {
   &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,
   &quot;Properties&quot;: {
      &quot;VpcId&quot; : &quot;vpc-1a2b3c4d&quot;,
      &quot;GroupDescription&quot;: &quot;Sample source security group&quot;
   }
},
&quot;TargetSG&quot;: {
   &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,
   &quot;Properties&quot;: {
      &quot;VpcId&quot; : &quot;vpc-1a2b3c4d&quot;,
      &quot;GroupDescription&quot;: &quot;Sample target security group&quot;
   }
},
&quot;OutboundRule&quot;: {
   &quot;Type&quot;: &quot;AWS::EC2::SecurityGroupEgress&quot;,
   &quot;Properties&quot;:{
      &quot;IpProtocol&quot;: &quot;tcp&quot;,
      &quot;FromPort&quot;: 0,
      &quot;ToPort&quot;: 65535,
      &quot;DestinationSecurityGroupId&quot;: {
         &quot;Fn::GetAtt&quot;: [
            &quot;TargetSG&quot;,
            &quot;GroupId&quot;
         ]
      },
      &quot;GroupId&quot;: {
         &quot;Fn::GetAtt&quot;: [
            &quot;SourceSG&quot;,
            &quot;GroupId&quot;
         ]
      }
   }
},
&quot;InboundRule&quot;: {
   &quot;Type&quot;: &quot;AWS::EC2::SecurityGroupIngress&quot;,
   &quot;Properties&quot;:{
      &quot;IpProtocol&quot;: &quot;tcp&quot;,
      &quot;FromPort&quot;: 0,
      &quot;ToPort&quot;: 65535,
      &quot;SourceSecurityGroupId&quot;: {
         &quot;Fn::GetAtt&quot;: [
            &quot;SourceSG&quot;,
            &quot;GroupId&quot;
         ]
      },
      &quot;GroupId&quot;: {
         &quot;Fn::GetAtt&quot;: [
            &quot;TargetSG&quot;,
            &quot;GroupId&quot;
         ]
      }
   }
}</code></pre><h4 id="aws-resource-ec2-security-group-egress--examples--VPC_Security_Groups_Example--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">SourceSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      VpcId: vpc-1a2b3c4d
      GroupDescription: Sample source security group
TargetSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      VpcId: vpc-1a2b3c4d
      GroupDescription: Sample target security group
OutboundRule:
    Type: AWS::EC2::SecurityGroupEgress
    Properties:
      IpProtocol: tcp
      FromPort: 0
      ToPort: 65535
      DestinationSecurityGroupId:
        Fn::GetAtt:
        - TargetSG
        - GroupId
      GroupId:
        Fn::GetAtt:
        - SourceSG
        - GroupId
InboundRule:
    Type: AWS::EC2::SecurityGroupIngress
    Properties:
      IpProtocol: tcp
      FromPort: 0
      ToPort: 65535
      SourceSecurityGroupId:
        Fn::GetAtt:
        - SourceSG
        - GroupId
      GroupId:
        Fn::GetAtt:
        - TargetSG
        - GroupId</code></pre><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div></div>
</body>
</html>