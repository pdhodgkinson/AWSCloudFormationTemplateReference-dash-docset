<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-waf-webacl">AWS::WAF::WebACL</h1><p>The <code class="code">AWS::WAF::WebACL</code> resource creates an AWS WAF web access control group
                        (ACL) containing the rules that identify the Amazon CloudFront (CloudFront) web requests
                        that you want to
                        allow, block, or count. For more information, see <a href="http://docs.aws.amazon.com/waf/latest/APIReference/API_CreateWebACL.html" target="_blank">CreateWebACL</a> in the
                        <em>AWS WAF API Reference</em>.
                     </p><div class="highlights">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-waf-webacl-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c21c10e1021b9">Properties</a></li>
                           <li><a href="#w2ab2c21c10e1021c11">Return Values</a></li>
                           <li><a href="#w2ab2c21c10e1021c13">Examples</a></li>
                           <li><a href="#w2ab2c21c10e1021c15">Associate a Web ACL with a CloudFront Distribution</a></li>
                        </ul>
                     </div><h2 id="aws-resource-waf-webacl-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-waf-webacl-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::WAF::WebACL&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-waf-webacl.html#cfn-waf-webacl-defaultaction"><code class="code">DefaultAction</code></a>&quot; : <em class="replaceable"><code>Action</code></em>,
    &quot;<a href="aws-resource-waf-webacl.html#cfn-waf-webacl-metricname"><code class="code">MetricName</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-waf-webacl.html#cfn-waf-webacl-name"><code class="code">Name</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-waf-webacl.html#cfn-waf-webacl-rules"><code class="code">Rules</code></a>&quot; : [ <em class="replaceable"><code>Rule, ...</code></em> ]
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-waf-webacl-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight">
Type: &quot;AWS::WAF::WebACL&quot;
Properties: 
  <a href="aws-resource-waf-webacl.html#cfn-waf-webacl-defaultaction"><code class="code">DefaultAction</code></a>:
    <em class="replaceable"><code>Action</code></em>
  <a href="aws-resource-waf-webacl.html#cfn-waf-webacl-metricname"><code class="code">MetricName</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-waf-webacl.html#cfn-waf-webacl-name"><code class="code">Name</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-waf-webacl.html#cfn-waf-webacl-rules"><code class="code">Rules</code></a>:
    - <em class="replaceable"><code>Rule</code></em> 
</code></pre>
                        </div><h2 id="w2ab2c21c10e1021b9">Properties</h2><div class="variablelist">
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-waf-webacl-defaultaction"></a><span class="term"><code class="code">DefaultAction</code></span></dt>
                           
                           <dd>
                              
                              <p>The action that you want AWS WAF to take when a request doesn&apos;t match the
                                 criteria in any of the rules that are associated with the web ACL.
                              </p>
                              
                              <p><em>Required: </em>Yes
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-waf-webacl-action.html">AWS WAF WebACL Action</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-waf-webacl-metricname"></a><span class="term"><code class="code">MetricName</code></span></dt>
                           
                           <dd>
                              
                              <p>A friendly name or description for the Amazon CloudWatch metric of this web ACL. For
                                 valid values, see the <code class="code">MetricName</code> parameter of the <a href="http://docs.aws.amazon.com/waf/latest/APIReference/API_CreateWebACL.html" target="_blank">CreateWebACL</a> action in the <em>AWS WAF API Reference</em>.
                              </p>
                              
                              <p><em>Required: </em>Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-waf-webacl-name"></a><span class="term"><code class="code">Name</code></span></dt>
                           
                           <dd>
                              
                              <p>A friendly name or description of the web ACL.</p>
                              
                              <p><em>Required: </em>Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-waf-webacl-rules"></a><span class="term"><code class="code">Rules</code></span></dt>
                           
                           <dd>
                              
                              <p>The rules to associate with the web ACL and the settings for each rule.</p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-waf-webacl-rules.html">AWS WAF WebACL Rules</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div><h2 id="w2ab2c21c10e1021c11">Return Values</h2><h3 id="w2ab2c21c10e1021c11b2">Ref</h3><p>When the logical ID of this resource is provided to the <code class="code">Ref</code>
                        intrinsic function, <code class="code">Ref</code> returns the resource name, such as
                        <code class="code">1234a1a-a1b1-12a1-abcd-a123b123456</code>.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="w2ab2c21c10e1021c13">Examples</h2><h3 id="w2ab2c21c10e1021c13b2">Create a Web ACL</h3><p>The following example defines a web ACL that allows, by default, any web request.
                        However, if the request matches any rule, AWS WAF blocks the request. AWS WAF evaluates
                        each rule in priority order, starting with the lowest value.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-waf-webacl-example1.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">&quot;MyWebACL&quot;: {
  &quot;Type&quot;: &quot;AWS::WAF::WebACL&quot;,
  &quot;Properties&quot;: {
    &quot;Name&quot;: &quot;WebACL to with three rules&quot;,
    &quot;DefaultAction&quot;: {
      &quot;Type&quot;: &quot;ALLOW&quot;
    },
    &quot;MetricName&quot; : &quot;MyWebACL&quot;,
    &quot;Rules&quot;: [
      {
        &quot;Action&quot; : {
          &quot;Type&quot; : &quot;BLOCK&quot;
        },
        &quot;Priority&quot; : 1,
        &quot;RuleId&quot; : { &quot;Ref&quot; : &quot;MyRule&quot; }
      },
      {
        &quot;Action&quot; : {
          &quot;Type&quot; : &quot;BLOCK&quot;
        },
        &quot;Priority&quot; : 2,
        &quot;RuleId&quot; : { &quot;Ref&quot; : &quot;BadReferersRule&quot; }
      },
      {
        &quot;Action&quot; : {
          &quot;Type&quot; : &quot;BLOCK&quot;
        },
        &quot;Priority&quot; : 3,
        &quot;RuleId&quot; : { &quot;Ref&quot; : &quot;SqlInjRule&quot; }
      }
    ]
  }      
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-waf-webacl-example1.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">MyWebACL: 
  Type: &quot;AWS::WAF::WebACL&quot;
  Properties: 
    Name: &quot;WebACL to with three rules&quot;
    DefaultAction: 
      Type: &quot;ALLOW&quot;
    MetricName: &quot;MyWebACL&quot;
    Rules: 
      - 
        Action: 
          Type: &quot;BLOCK&quot;
        Priority: 1
        RuleId: 
          Ref: &quot;MyRule&quot;
      - 
        Action: 
          Type: &quot;BLOCK&quot;
        Priority: 2
        RuleId: 
          Ref: &quot;BadReferersRule&quot;
      - 
        Action: 
          Type: &quot;BLOCK&quot;
        Priority: 3
        RuleId: 
          Ref: &quot;SqlInjRule&quot;</code></pre>
                        </div><h2 id="w2ab2c21c10e1021c15">Associate a Web ACL with a CloudFront Distribution</h2><p>The follow example associates the <code class="code">MyWebACL</code> web ACL with a CloudFront distribution.
                        The web ACL restricts which requests can access content served by CloudFront.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-waf-webacl-example2.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">&quot;myDistribution&quot;: {
  &quot;Type&quot;: &quot;AWS::CloudFront::Distribution&quot;,
  &quot;Properties&quot;: {
    &quot;DistributionConfig&quot;: {    
      &quot;WebACLId&quot;: { &quot;Ref&quot; : &quot;MyWebACL&quot; },
      &quot;Origins&quot;: [
        {
          &quot;DomainName&quot;: &quot;test.example.com&quot;,
          &quot;Id&quot;: &quot;myCustomOrigin&quot;,
          &quot;CustomOriginConfig&quot;: {
            &quot;HTTPPort&quot;: &quot;80&quot;,
            &quot;HTTPSPort&quot;: &quot;443&quot;,
            &quot;OriginProtocolPolicy&quot;: &quot;http-only&quot;
          }
        }
      ],
      &quot;Enabled&quot;: &quot;true&quot;,
      &quot;Comment&quot;: &quot;TestDistribution&quot;,
      &quot;DefaultRootObject&quot;: &quot;index.html&quot;,
      &quot;DefaultCacheBehavior&quot;: {
        &quot;TargetOriginId&quot;: &quot;myCustomOrigin&quot;,
        &quot;SmoothStreaming&quot; : &quot;false&quot;,
        &quot;ForwardedValues&quot;: {
          &quot;QueryString&quot;: &quot;false&quot;,
          &quot;Cookies&quot; : { &quot;Forward&quot; : &quot;all&quot; }
        },
        &quot;ViewerProtocolPolicy&quot;: &quot;allow-all&quot;
      },
      &quot;CustomErrorResponses&quot; : [
        {
          &quot;ErrorCode&quot; : &quot;404&quot;,
          &quot;ResponsePagePath&quot; : &quot;/error-pages/404.html&quot;,
          &quot;ResponseCode&quot; : &quot;200&quot;,
          &quot;ErrorCachingMinTTL&quot; : &quot;30&quot;
        }
      ],
      &quot;PriceClass&quot; : &quot;PriceClass_200&quot;,
      &quot;Restrictions&quot; : {
        &quot;GeoRestriction&quot; : {
          &quot;RestrictionType&quot; : &quot;whitelist&quot;,
          &quot;Locations&quot; : [ &quot;AQ&quot;, &quot;CV&quot; ]
        }
      },
      &quot;ViewerCertificate&quot; : { &quot;CloudFrontDefaultCertificate&quot; : &quot;true&quot; }
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-waf-webacl-example2.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">myDistribution: 
  Type: &quot;AWS::CloudFront::Distribution&quot;
  Properties: 
    DistributionConfig: 
      WebACLId: 
        Ref: &quot;MyWebACL&quot;
      Origins: 
        - 
          DomainName: &quot;test.example.com&quot;
          Id: &quot;myCustomOrigin&quot;
          CustomOriginConfig: 
            HTTPPort: &quot;80&quot;
            HTTPSPort: &quot;443&quot;
            OriginProtocolPolicy: &quot;http-only&quot;
      Enabled: &quot;true&quot;
      Comment: &quot;TestDistribution&quot;
      DefaultRootObject: &quot;index.html&quot;
      DefaultCacheBehavior: 
        TargetOriginId: &quot;myCustomOrigin&quot;
        SmoothStreaming: &quot;false&quot;
        ForwardedValues: 
          QueryString: &quot;false&quot;
          Cookies: 
            Forward: &quot;all&quot;
        ViewerProtocolPolicy: &quot;allow-all&quot;
      CustomErrorResponses: 
        - 
          ErrorCode: &quot;404&quot;
          ResponsePagePath: &quot;/error-pages/404.html&quot;
          ResponseCode: &quot;200&quot;
          ErrorCachingMinTTL: &quot;30&quot;
      PriceClass: &quot;PriceClass_200&quot;
      Restrictions: 
        GeoRestriction: 
          RestrictionType: &quot;whitelist&quot;
          Locations: 
            - &quot;AQ&quot;
            - &quot;CV&quot;
      ViewerCertificate: 
        CloudFrontDefaultCertificate: &quot;true&quot;</code></pre>
                        </div></div>
</body>
</html>