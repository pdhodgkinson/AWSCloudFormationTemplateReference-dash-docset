<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-opsworks-stack">AWS::OpsWorks::Stack</h1><p>Creates an AWS OpsWorks stack. An AWS OpsWorks stack represents a set of instances
                        that you want to
                        manage collectively, typically because they have a common purpose such as serving
                        PHP
                        applications.
                     </p><div class="highlights">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-opsworks-stack-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c21c10d835b9">Properties</a></li>
                           <li><a href="#w2ab2c21c10d835c11">Return Values</a></li>
                           <li><a href="#w2ab2c21c10d835c13">Template Examples</a></li>
                           <li><a href="#w2ab2c21c10d835c15">Additional Information</a></li>
                        </ul>
                     </div><h2 id="aws-resource-opsworks-stack-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-opsworks-stack-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::OpsWorks::Stack&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-agentversion"><code class="code">AgentVersion</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-attributes"><code class="code">Attributes</code></a>&quot; : { <em class="replaceable"><code>String</code></em>:<em class="replaceable"><code>String, ...</code></em> },
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-chefconfiguration"><code class="code">ChefConfiguration</code></a>&quot; : { <em class="replaceable"><code>ChefConfiguration</code></em> },
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-cloneappids"><code class="code">CloneAppIds</code></a>&quot; : [ <em class="replaceable"><code>String, ...</code></em> ],
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-clonepermissions"><code class="code">ClonePermissions</code></a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-configmanager"><code class="code">ConfigurationManager</code></a>&quot; : { <em class="replaceable"><code>StackConfigurationManager</code></em> },
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-custcookbooksource"><code class="code">CustomCookbooksSource</code></a>&quot; : { <em class="replaceable"><code>Source</code></em> },
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-custjson"><code class="code">CustomJson</code></a>&quot; : <em class="replaceable"><code>JSON</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultaz"><code class="code">DefaultAvailabilityZone</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultinstanceprof"><code class="code">DefaultInstanceProfileArn</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultos"><code class="code">DefaultOs</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultrootdevicetype"><code class="code">DefaultRootDeviceType</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultsshkeyname"><code class="code">DefaultSshKeyName</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultsubnet"><code class="code">DefaultSubnetId</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-ecsclusterarn"><code class="code">EcsClusterArn</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-elasticips"><code class="code">ElasticIps</code></a>&quot; : [ <em class="replaceable"><code><a href="aws-properties-opsworks-stack-elasticip.html">ElasticIp</a>, ...</code></em> ],
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-hostnametheme"><code class="code">HostnameTheme</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-name"><code class="code">Name</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-rdsdbinstances"><code class="code">RdsDbInstances</code></a>&quot; : [ <em class="replaceable"><code><a href="aws-properties-opsworks-stack-rdsdbinstance.html">RdsDbInstance</a>, ...</code></em> ],
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-servicerolearn"><code class="code">ServiceRoleArn</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-sourcestackid"><code class="code">SourceStackId</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-tags"><code class="code">Tags</code></a>&quot; : [ <em class="replaceable"><code><a href="aws-properties-resource-tags.html">Tags</a>, ...</code></em> ], 
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-usecustcookbooks"><code class="code">UseCustomCookbooks</code></a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-useopsworkssecuritygroups"><code class="code">UseOpsworksSecurityGroups</code></a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-vpcid"><code class="code">VpcId</code></a>&quot; : <em class="replaceable"><code>String</code></em>
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-opsworks-stack-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight">Type: &quot;AWS::OpsWorks::Stack&quot;
Properties: 
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-agentversion"><code class="code">AgentVersion</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-attributes"><code class="code">Attributes</code></a>:
    <em class="replaceable"><code>String</code></em>:<em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-chefconfiguration"><code class="code">ChefConfiguration</code></a>:
    <em class="replaceable"><code>ChefConfiguration</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-cloneappids"><code class="code">CloneAppIds</code></a>: 
  - <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-clonepermissions"><code class="code">ClonePermissions</code></a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-configmanager"><code class="code">ConfigurationManager</code></a>:
    <em class="replaceable"><code>StackConfigurationManager</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-custcookbooksource"><code class="code">CustomCookbooksSource</code></a>:
    <em class="replaceable"><code>Source</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-custjson"><code class="code">CustomJson</code></a>: <em class="replaceable"><code>JSON</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultaz"><code class="code">DefaultAvailabilityZone</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultinstanceprof"><code class="code">DefaultInstanceProfileArn</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultos"><code class="code">DefaultOs</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultrootdevicetype"><code class="code">DefaultRootDeviceType</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultsshkeyname"><code class="code">DefaultSshKeyName</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-defaultsubnet"><code class="code">DefaultSubnetId</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-ecsclusterarn"><code class="code">EcsClusterArn</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-elasticips"><code class="code">ElasticIps</code></a>: 
  - <em class="replaceable"><code><a href="aws-properties-opsworks-stack-elasticip.html">ElasticIp</a></code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-hostnametheme"><code class="code">HostnameTheme</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-name"><code class="code">Name</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-rdsdbinstances"><code class="code">RdsDbInstances</code></a>: 
  - <em class="replaceable"><code><a href="aws-properties-opsworks-stack-rdsdbinstance.html">RdsDbInstance</a></code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-servicerolearn"><code class="code">ServiceRoleArn</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-sourcestackid"><code class="code">SourceStackId</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-tags"><code class="code">Tags</code></a>: 
  - <em class="replaceable"><code><a href="aws-properties-resource-tags.html">Tags</a></code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-usecustcookbooks"><code class="code">UseCustomCookbooks</code></a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-useopsworkssecuritygroups"><code class="code">UseOpsworksSecurityGroups</code></a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-opsworks-stack.html#cfn-opsworks-stack-vpcid"><code class="code">VpcId</code></a>: <em class="replaceable"><code>String</code></em>
</code></pre>
                        </div><h2 id="w2ab2c21c10d835b9">Properties</h2><div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-opsworks-stack-agentversion"></a><span class="term"><code class="code">AgentVersion</code></span></dt>
                           
                           <dd>
                              
                              <p>The AWS OpsWorks agent version that you want to use. The agent communicates with the
                                 service and handles tasks such as initiating Chef runs in response to lifecycle
                                 events. For valid values, see the <a href="http://docs.aws.amazon.com/opsworks/latest/APIReference/API_CreateStack.html#opsworks-CreateStack-request-AgentVersion" target="_blank">AgentVersion</a> parameter for the <code class="code">CreateStack</code> action in the
                                 <em>AWS OpsWorks Stacks API Reference</em>.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-attributes"></a><span class="term"><code class="code">Attributes</code></span></dt>
                           
                           <dd>
                              
                              <p>One or more user-defined key-value pairs to be added to the stack attributes
                                 bag.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: A list of key-value pairs
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-chefconfiguration"></a><span class="term"><code class="code">ChefConfiguration</code></span></dt>
                           
                           <dd>
                              
                              <p>Describes the Chef configuration. For more information, see the <a href="http://docs.aws.amazon.com/opsworks/latest/APIReference/API_CreateStack.html#opsworks-CreateStack-request-ChefConfiguration" target="_blank">CreateStack ChefConfiguration</a> parameter in the
                                 <em>AWS OpsWorks Stacks API Reference</em>.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>To enable Berkshelf, you must select a Chef version in the
                                    <code class="code">ConfigurationManager</code> property that supports Berkshelf.
                                 </p>
                              </div>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-opsworks-stack-chefconfiguration.html">AWS OpsWorks ChefConfiguration
                                    Type</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           <dt><a id="cfn-opsworks-stack-cloneappids"></a><span class="term"><code class="code">CloneAppIds</code></span></dt>
                           <dd>
                              
                              <p>If you&apos;re cloning an AWS OpsWorks stack, a list of AWS OpsWorks application stack
                                 IDs from the
                                 source stack to include in the cloned stack.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: List of String values
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           <dt><a id="cfn-opsworks-stack-clonepermissions"></a><span class="term"><code class="code">ClonePermissions</code></span></dt>
                           <dd>
                              
                              <p>If you&apos;re cloning an AWS OpsWorks stack, indicates whether to clone the source stack&apos;s
                                 permissions.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-configmanager"></a><span class="term"><code class="code">ConfigurationManager</code></span></dt>
                           
                           <dd>
                              
                              <p>Describes the configuration manager. When you create a stack, you use the
                                 configuration manager to specify the Chef version. For supported Chef versions,
                                 see the <a href="http://docs.aws.amazon.com/opsworks/latest/APIReference/API_CreateStack.html#opsworks-CreateStack-request-ConfigurationManager" target="_blank">CreateStack ConfigurationManager</a> parameter in the
                                 <em>AWS OpsWorks Stacks API Reference</em>.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-opsworks-stack-stackconfigmanager.html">AWS OpsWorks
                                    StackConfigurationManager Type</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-custcookbooksource"></a><span class="term"><code class="code">CustomCookbooksSource</code></span></dt>
                           
                           <dd>
                              
                              <p>Contains the information required to retrieve a cookbook from a
                                 repository.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-opsworks-stack-source.html">AWS OpsWorks Source Type</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-custjson"></a><span class="term"><code class="code">CustomJson</code></span></dt>
                           
                           <dd>
                              
                              <p>A user-defined custom JSON object. The custom JSON is used to override the
                                 corresponding default stack configuration JSON values. For more information, see
                                 <a href="http://docs.aws.amazon.com/opsworks/latest/APIReference/API_CreateStack.html" target="_blank">CreateStack</a> in the
                                 <em>AWS OpsWorks Stacks API Reference</em>.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Important</p>
                                 <p>AWS CloudFormation submits all JSON attributes as strings, including any Boolean or
                                    number attributes. If you have recipes that expect booleans or numbers, you
                                    must modify the recipes to accept strings and to interpret those strings as
                                    booleans or numbers.
                                 </p>
                              </div>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: JSON object
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-defaultaz"></a><span class="term"><code class="code">DefaultAvailabilityZone</code></span></dt>
                           
                           <dd>
                              
                              <p>The stack&apos;s default Availability Zone, which must be in the specified
                                 region.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-defaultinstanceprof"></a><span class="term"><code class="code">DefaultInstanceProfileArn</code></span></dt>
                           
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of an IAM instance profile that is the default
                                 profile for all of the stack&apos;s Amazon EC2 instances.
                              </p>
                              
                              <p><em>Required: </em>Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-defaultos"></a><span class="term"><code class="code">DefaultOs</code></span></dt>
                           
                           <dd>
                              
                              <p>The stack&apos;s default operating system. For more information, see <a href="http://docs.aws.amazon.com/opsworks/latest/APIReference/API_CreateStack.html" target="_blank">CreateStack</a> in the
                                 <em>AWS OpsWorks Stacks API Reference</em>.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-defaultrootdevicetype"></a><span class="term"><code class="code">DefaultRootDeviceType</code></span></dt>
                           
                           <dd>
                              
                              <p>The default root device type. This value is used by default for all instances
                                 in the stack, but you can override it when you create an instance. For more
                                 information, see <a href="http://docs.aws.amazon.com/opsworks/latest/APIReference/API_CreateStack.html" target="_blank">CreateStack</a> in the <em>AWS OpsWorks Stacks API Reference</em>.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-defaultsshkeyname"></a><span class="term"><code class="code">DefaultSshKeyName</code></span></dt>
                           
                           <dd>
                              
                              <p>A default SSH key for the stack instances. You can override this value when you
                                 create or update an instance.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-defaultsubnet"></a><span class="term"><code class="code">DefaultSubnetId</code></span></dt>
                           
                           <dd>
                              
                              <p>The stack&apos;s default subnet ID. All instances are launched into this subnet
                                 unless you specify another subnet ID when you create the instance.
                              </p>
                              
                              <p><em>Required: </em>Conditional. If you specify the <code class="code">VpcId</code> property, you
                                 must specify this property.
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           <dt><a id="cfn-opsworks-stack-ecsclusterarn"></a><span class="term"><code class="code">EcsClusterArn</code></span></dt>
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of the Amazon EC2 Container Service (Amazon ECS) cluster
                                 to register
                                 with the AWS OpsWorks stack.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>If you specify a cluster that&apos;s registered with another AWS OpsWorks stack, AWS CloudFormation
                                    deregisters the existing association before registering the cluster.
                                 </p>
                              </div>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           <dt><a id="cfn-opsworks-stack-elasticips"></a><span class="term"><code class="code">ElasticIps</code></span></dt>
                           <dd>
                              
                              <p>A list of Elastic IP addresses to register with the AWS OpsWorks stack.</p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>If you specify an IP address that&apos;s registered with another AWS OpsWorks stack,
                                    AWS CloudFormation deregisters the existing association before registering the IP
                                    address.
                                 </p>
                              </div>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-opsworks-stack-elasticip.html">AWS OpsWorks Stack ElasticIp</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-hostnametheme"></a><span class="term"><code class="code">HostnameTheme</code></span></dt>
                           
                           <dd>
                              
                              <p>The stack&apos;s host name theme, with spaces replaced by underscores. The theme is
                                 used to generate host names for the stack&apos;s instances. For more information, see
                                 <a href="http://docs.aws.amazon.com/opsworks/latest/APIReference/API_CreateStack.html" target="_blank">CreateStack</a> in the
                                 <em>AWS OpsWorks Stacks API Reference</em>.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-name"></a><span class="term"><code class="code">Name</code></span></dt>
                           
                           <dd>
                              
                              <p>The name of the AWS OpsWorks stack.</p>
                              
                              <p><em>Required: </em>Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           <dt><a id="cfn-opsworks-stack-rdsdbinstances"></a><span class="term"><code class="code">RdsDbInstances</code></span></dt>
                           <dd>
                              
                              <p>The Amazon Relational Database Service (Amazon RDS) DB instance to register with the
                                 AWS OpsWorks stack.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>If you specify a DB instance that&apos;s registered with another AWS OpsWorks stack,
                                    AWS CloudFormation deregisters the existing association before registering the DB
                                    instance.
                                 </p>
                              </div>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-opsworks-stack-rdsdbinstance.html">AWS OpsWorks Stack RdsDbInstance</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-servicerolearn"></a><span class="term"><code class="code">ServiceRoleArn</code></span></dt>
                           
                           <dd>
                              
                              <p>The AWS Identity and Access Management (IAM) role that AWS OpsWorks uses to work with
                                 AWS resources on your
                                 behalf. You must specify an Amazon Resource Name (ARN) for an existing IAM
                                 role.
                              </p>
                              
                              <p><em>Required: </em>Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           <dt><a id="cfn-opsworks-stack-sourcestackid"></a><span class="term"><code class="code">SourceStackId</code></span></dt>
                           <dd>
                              
                              <p>If you&apos;re cloning an AWS OpsWorks stack, the stack ID of the source AWS OpsWorks stack
                                 to
                                 clone.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                           
                           <dd>
                              
                              <p>Specifies an arbitrary set of tags (key&#x2013;value pairs) to associate with this
                                 AWS OpsWorks stack. Use tags to manage your resources.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-resource-tags.html">AWS CloudFormation Resource Tags</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-usecustcookbooks"></a><span class="term"><code class="code">UseCustomCookbooks</code></span></dt>
                           
                           <dd>
                              
                              <p>Whether the stack uses custom cookbooks.</p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-useopsworkssecuritygroups"></a><span class="term"><code class="code">UseOpsworksSecurityGroups</code></span></dt>
                           
                           <dd>
                              
                              <p>Whether to associate the AWS OpsWorks built-in security groups with the stack&apos;s
                                 layers.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-stack-vpcid"></a><span class="term"><code class="code">VpcId</code></span></dt>
                           
                           <dd>
                              
                              <p>The ID of the VPC that the stack is to be launched into, which must be in the
                                 specified region. All instances are launched into this VPC. If you specify this
                                 property, you must specify the <code class="code">DefaultSubnetId</code> property.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div><h2 id="w2ab2c21c10d835c11">Return Values</h2><h3 id="w2ab2c21c10d835c11b2">Ref</h3><p>When the logical ID of this resource is provided to the <code class="code">Ref</code> intrinsic
                        function, <code class="code">Ref</code> returns the resource name. For example:
                     </p><pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight">{ &quot;Ref&quot;: &quot;<em class="replaceable"><code>myStack</code></em>&quot; }</code></pre><p>For the AWS OpsWorks stack <code class="code">myStack</code>, <code class="code">Ref</code> returns the AWS OpsWorks
                        stack ID.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="w2ab2c21c10d835c13">Template Examples</h2><p>The following snippet creates an AWS OpsWorks stack that uses the default service
                        role and
                        Amazon EC2 role, which are created after you use AWS OpsWorks for the first time:
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-opsworks-stack-example.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">&quot;myStack&quot; : {
  &quot;Type&quot; : &quot;AWS::OpsWorks::Stack&quot;,
  &quot;Properties&quot; : {
    &quot;Name&quot; : {&quot;Ref&quot;:&quot;OpsWorksStackName&quot;},
    &quot;ServiceRoleArn&quot; : { &quot;Fn::Join&quot;: [&quot;&quot;, [&quot;arn:aws:iam::&quot;, {&quot;Ref&quot;:&quot;AWS::AccountId&quot;}, &quot;:role/aws-opsworks-service-role&quot;]] },
    &quot;DefaultInstanceProfileArn&quot; : { &quot;Fn::Join&quot;: [&quot;&quot;, [&quot;arn:aws:iam::&quot;, {&quot;Ref&quot;:&quot;AWS::AccountId&quot;}, &quot;:instance-profile/aws-opsworks-ec2-role&quot;]] },
    &quot;DefaultSshKeyName&quot; : {&quot;Ref&quot;:&quot;KeyName&quot;}
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-opsworks-stack-example.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">myStack: 
  Type: &quot;AWS::OpsWorks::Stack&quot;
  Properties: 
    Name: 
      Ref: &quot;OpsWorksStackName&quot;
    ServiceRoleArn: 
      Fn::Join: 
        - &quot;&quot;
        - 
          - &quot;arn:aws:iam::&quot;
          - 
            Ref: &quot;AWS::AccountId&quot;
          - &quot;:role/aws-opsworks-service-role&quot;
    DefaultInstanceProfileArn: 
      Fn::Join: 
        - &quot;&quot;
        - 
          - &quot;arn:aws:iam::&quot;
          - 
            Ref: &quot;AWS::AccountId&quot;
          - &quot;:instance-profile/aws-opsworks-ec2-role&quot;
    DefaultSshKeyName: 
      Ref: &quot;KeyName&quot;</code></pre>
                        </div><h3 id="aws-resource-opsworks-stack-example3">Specify tags for layers and stacks</h3><p>The following complete template example specifies tags for an AWS OpsWorks layer and
                        stack
                        that reference parameter values.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        
                        <h4 id="aws-resource-opsworks-stack-example3.json">JSON</h4>
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">{
    &quot;Resources&quot;: {
        &quot;ServiceRole&quot;: {
            &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
            &quot;Properties&quot;: {
                &quot;AssumeRolePolicyDocument&quot;: {
                    &quot;Statement&quot;: [
                        {
                            &quot;Effect&quot;: &quot;Allow&quot;,
                            &quot;Principal&quot;: {
                                &quot;Service&quot;: [
                                    {
                                        &quot;Ref&quot;: &quot;OpsServicePrincipal&quot;
                                    }
                                ]
                            },
                            &quot;Action&quot;: [
                                &quot;sts:AssumeRole&quot;
                            ]
                        }
                    ]
                },
                &quot;Path&quot;: &quot;/&quot;,
                &quot;Policies&quot;: [
                    {
                        &quot;PolicyName&quot;: &quot;opsworks-service&quot;,
                        &quot;PolicyDocument&quot;: {
                            &quot;Statement&quot;: [
                                {
                                    &quot;Effect&quot;: &quot;Allow&quot;,
                                    &quot;Action&quot;: [
                                        &quot;ec2:*&quot;,
                                        &quot;iam:PassRole&quot;,
                                        &quot;cloudwatch:GetMetricStatistics&quot;,
                                        &quot;elasticloadbalancing:*&quot;
                                    ],
                                    &quot;Resource&quot;: &quot;*&quot;
                                }
                            ]
                        }
                    }
                ]
            }
        },
        &quot;OpsWorksEC2Role&quot;: {
            &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
            &quot;Properties&quot;: {
                &quot;AssumeRolePolicyDocument&quot;: {
                    &quot;Statement&quot;: [
                        {
                            &quot;Effect&quot;: &quot;Allow&quot;,
                            &quot;Principal&quot;: {
                                &quot;Service&quot;: [
                                    {
                                        &quot;Ref&quot;: &quot;Ec2ServicePrincipal&quot;
                                    }
                                ]
                            },
                            &quot;Action&quot;: [
                                &quot;sts:AssumeRole&quot;
                            ]
                        }
                    ]
                },
                &quot;Path&quot;: &quot;/&quot;
            }
        },
        &quot;InstanceRole&quot;: {
            &quot;Type&quot;: &quot;AWS::IAM::InstanceProfile&quot;,
            &quot;Properties&quot;: {
                &quot;Path&quot;: &quot;/&quot;,
                &quot;Roles&quot;: [
                    {
                        &quot;Ref&quot;: &quot;OpsWorksEC2Role&quot;
                    }
                ]
            }
        },
        &quot;myStack&quot;: {
            &quot;Type&quot;: &quot;AWS::OpsWorks::Stack&quot;,
            &quot;Properties&quot;: {
                &quot;Name&quot;: &quot;TestStack&quot;,
                &quot;ServiceRoleArn&quot;: {
                    &quot;Fn::GetAtt&quot;: [
                        &quot;ServiceRole&quot;,
                        &quot;Arn&quot;
                    ]
                },
                &quot;DefaultInstanceProfileArn&quot;: {
                    &quot;Fn::GetAtt&quot;: [
                        &quot;InstanceRole&quot;,
                        &quot;Arn&quot;
                    ]
                },
                &quot;Tags&quot;: [
                    {
                        &quot;Key&quot;: {
                            &quot;Ref&quot;: &quot;StackKey&quot;
                        },
                        &quot;Value&quot;: {
                            &quot;Ref&quot;: &quot;StackValue&quot;
                        }
                    }
                ]
            }
        },
        &quot;myLayer&quot;: {
            &quot;Type&quot;: &quot;AWS::OpsWorks::Layer&quot;,
            &quot;Properties&quot;: {
                &quot;EnableAutoHealing&quot;: &quot;true&quot;,
                &quot;AutoAssignElasticIps&quot;: &quot;false&quot;,
                &quot;AutoAssignPublicIps&quot;: &quot;true&quot;,
                &quot;StackId&quot;: {
                    &quot;Ref&quot;: &quot;myStack&quot;
                },
                &quot;Type&quot;: &quot;custom&quot;,
                &quot;Shortname&quot;: &quot;shortname&quot;,
                &quot;Name&quot;: &quot;name&quot;,
                &quot;Tags&quot;: [
                    {
                        &quot;Key&quot;: {
                            &quot;Ref&quot;: &quot;LayerKey&quot;
                        },
                        &quot;Value&quot;: {
                            &quot;Ref&quot;: &quot;LayerValue&quot;
                        }
                    }
                ]
            }
        }
    },
    &quot;Parameters&quot;: {
        &quot;StackKey&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        },
        &quot;LayerKey&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        },
        &quot;StackValue&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        },
        &quot;LayerValue&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        },
        &quot;OpsServicePrincipal&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        },
        &quot;Ec2ServicePrincipal&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        }
    }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        
                        <h4 id="aws-resource-opsworks-stack-example3.yaml">YAML</h4>
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">Resources:
  ServiceRole:
    Type: &apos;AWS::IAM::Role&apos;
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - !Ref OpsServicePrincipal
            Action:
              - &apos;sts:AssumeRole&apos;
      Path: /
      Policies:
        - PolicyName: opsworks-service
          PolicyDocument:
            Statement:
              - Effect: Allow
                Action:
                  - &apos;ec2:*&apos;
                  - &apos;iam:PassRole&apos;
                  - &apos;cloudwatch:GetMetricStatistics&apos;
                  - &apos;elasticloadbalancing:*&apos;
                Resource: &apos;*&apos;
  OpsWorksEC2Role:
    Type: &apos;AWS::IAM::Role&apos;
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - !Ref Ec2ServicePrincipal
            Action:
              - &apos;sts:AssumeRole&apos;
      Path: /
  InstanceRole:
    Type: &apos;AWS::IAM::InstanceProfile&apos;
    Properties:
      Path: /
      Roles:
        - !Ref OpsWorksEC2Role
  myStack:
    Type: &apos;AWS::OpsWorks::Stack&apos;
    Properties:
      Name: TestStack
      ServiceRoleArn: !GetAtt 
        - ServiceRole
        - Arn
      DefaultInstanceProfileArn: !GetAtt 
        - InstanceRole
        - Arn
      Tags:
        - Key: !Ref StackKey
          Value: !Ref StackValue
  myLayer:
    Type: &apos;AWS::OpsWorks::Layer&apos;
    Properties:
      EnableAutoHealing: &apos;true&apos;
      AutoAssignElasticIps: &apos;false&apos;
      AutoAssignPublicIps: &apos;true&apos;
      StackId: !Ref myStack
      Type: custom
      Shortname: shortname
      Name: name
      Tags:
        - Key: !Ref LayerKey
          Value: !Ref LayerValue
Parameters:
  StackKey:
    Type: String
  LayerKey:
    Type: String
  StackValue:
    Type: String
  LayerValue:
    Type: String
  OpsServicePrincipal:
    Type: String
  Ec2ServicePrincipal:
    Type: String
</code></pre>
                        </div><h2 id="w2ab2c21c10d835c15">Additional Information</h2><div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>For a complete sample AWS OpsWorks template, see <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-opsworks.html">AWS OpsWorks Template Snippets</a>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="aws-resource-opsworks-layer.html">AWS::OpsWorks::Layer</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="aws-resource-opsworks-app.html">AWS::OpsWorks::App</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="aws-resource-opsworks-instance.html">AWS::OpsWorks::Instance</a></p>
                              
                           </li>
                        </ul>
                     </div></div>
</body>
</html>