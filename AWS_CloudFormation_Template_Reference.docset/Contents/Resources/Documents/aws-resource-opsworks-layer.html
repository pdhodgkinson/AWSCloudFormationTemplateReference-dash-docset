<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-opsworks-layer">AWS::OpsWorks::Layer</h1><p>Creates an AWS OpsWorks layer. A layer defines, for example, which packages and applications
                        are
                        installed and how they are configured.
                     </p><div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-opsworks-layer-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c21c10d941b9">Properties</a></li>
                           <li><a href="#w2ab2c21c10d941c11">Return Values</a></li>
                           <li><a href="#w2ab2c21c10d941c13">Template Examples</a></li>
                           <li><a href="#w2ab2c21c10d941c15">See Also</a></li>
                        </ul>
                     </div><h2 id="aws-resource-opsworks-layer-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-opsworks-layer-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Type&quot;: &quot;AWS::OpsWorks::Layer&quot;,
  &quot;Properties&quot;: {
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-attributes"><code class="code">Attributes</code></a>&quot; : { <em class="replaceable"><code>String</code></em>:<em class="replaceable"><code>String</code></em> },
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-autoassignelasticips"><code class="code">AutoAssignElasticIps</code></a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-autoassignpublicips"><code class="code">AutoAssignPublicIps</code></a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-custinstanceprofilearn"><code class="code">CustomInstanceProfileArn</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-customjson"><code class="code">CustomJson</code></a>&quot; : <em class="replaceable"><code>JSON object</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-customrecipes"><code class="code">CustomRecipes</code></a>&quot; : <em class="replaceable"><code>Recipes</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-custsecuritygroupnids"><code class="code">CustomSecurityGroupIds</code></a>&quot; :  [ <em class="replaceable"><code>String, ...</code></em> ],
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-enableautohealing"><code class="code">EnableAutoHealing</code></a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-installupdatesonboot"><code class="code">InstallUpdatesOnBoot</code></a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-lifecycleeventconfiguration"><code class="code">LifecycleEventConfiguration</code></a>&quot; : <em class="replaceable"><code>LifeCycleEventConfiguration</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-loadbasedautoscaling"><code class="code">LoadBasedAutoScaling</code></a>&quot; : <em class="replaceable"><code>LoadBasedAutoScaling</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-name"><code class="code">Name</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-packages"><code class="code">Packages</code></a>&quot; : [ <em class="replaceable"><code>String, ...</code></em> ],
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-shortname"><code class="code">Shortname</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-stackid"><code class="code">StackId</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-tags"><code class="code">Tags</code></a>&quot; : [ <em class="replaceable"><code><a href="aws-properties-resource-tags.html">Tags</a>, ...</code></em> ],
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-type"><code class="code">Type</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-volconfig"><code class="code">VolumeConfigurations</code></a>&quot; : [ <em class="replaceable"><code>VolumeConfiguration, ...</code></em> ]
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-opsworks-layer-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Type: &quot;AWS::OpsWorks::Layer&quot;
Properties:
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-attributes"><code class="code">Attributes</code></a>:
    <em class="replaceable"><code>String</code></em>:<em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-autoassignelasticips"><code class="code">AutoAssignElasticIps</code></a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-autoassignpublicips"><code class="code">AutoAssignPublicIps</code></a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-custinstanceprofilearn"><code class="code">CustomInstanceProfileArn</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-customrecipes"><code class="code">CustomRecipes</code></a>:
    <em class="replaceable"><code>Recipes</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-customjson"><code class="code">CustomJson</code></a>:
    <em class="replaceable"><code>JSON object</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-custsecuritygroupnids"><code class="code">CustomSecurityGroupIds</code></a>:
    - <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-enableautohealing"><code class="code">EnableAutoHealing</code></a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-installupdatesonboot"><code class="code">InstallUpdatesOnBoot</code></a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-lifecycleeventconfiguration"><code class="code">LifecycleEventConfiguration</code></a>:
    <em class="replaceable"><code>LifeCycleEventConfiguration</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-loadbasedautoscaling"><code class="code">LoadBasedAutoScaling</code></a>:
    <em class="replaceable"><code>LoadBasedAutoScaling</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-name"><code class="code">Name</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-packages"><code class="code">Packages</code></a>:
    - <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-shortname"><code class="code">Shortname</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-stackid"><code class="code">StackId</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-tags"><code class="code">Tags</code></a>: 
  - <em class="replaceable"><code><a href="aws-properties-resource-tags.html">Tags</a></code></em> 
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-type"><code class="code">Type</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-opsworks-layer.html#cfn-opsworks-layer-volconfig"><code class="code">VolumeConfigurations</code></a>:
    - <em class="replaceable"><code>VolumeConfiguration</code></em> 
</code></pre>
                        </div><h2 id="w2ab2c21c10d941b9">Properties</h2><div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-opsworks-layer-attributes"></a><span class="term"><code class="code">Attributes</code></span></dt>
                           
                           <dd>
                              
                              <p>One or more user-defined key-value pairs to be added to the stack attributes
                                 bag.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: A list of key-value pairs
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-autoassignelasticips"></a><span class="term"><code class="code">AutoAssignElasticIps</code></span></dt>
                           
                           <dd>
                              
                              <p>Whether to automatically assign an Elastic IP address to Amazon EC2 instances in
                                 this layer.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-autoassignpublicips"></a><span class="term"><code class="code">AutoAssignPublicIps</code></span></dt>
                           
                           <dd>
                              
                              <p>For AWS OpsWorks stacks that are running in a VPC, whether to automatically assign
                                 a
                                 public IP address to Amazon EC2 instances in this layer.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-custinstanceprofilearn"></a><span class="term"><code class="code">CustomInstanceProfileArn</code></span></dt>
                           
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of an IAM instance profile that is to be used
                                 for the Amazon EC2 instances in this layer.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-customjson"></a><span class="term"><code class="code">CustomJson</code></span></dt>
                           
                           <dd>
                              
                              <p>A custom stack configuration and deployment attributes that AWS OpsWorks installs
                                 on
                                 the layer&apos;s instances. For more information, see the <code class="code">CustomJson</code>
                                 parameter for the <a href="http://docs.aws.amazon.com/opsworks/latest/APIReference/API_CreateLayer.html" target="_blank">CreateLayer</a> action in the
                                 <em>AWS OpsWorks Stacks API Reference</em>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: JSON object
                              </p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-customrecipes"></a><span class="term"><code class="code">CustomRecipes</code></span></dt>
                           
                           <dd>
                              
                              <p>Custom event recipes for this layer.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-opsworks-layer-recipes.html">AWS OpsWorks Recipes Type</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-custsecuritygroupnids"></a><span class="term"><code class="code">CustomSecurityGroupIds</code></span></dt>
                           
                           <dd>
                              
                              <p>Custom security group IDs for this layer.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of String values
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-enableautohealing"></a><span class="term"><code class="code">EnableAutoHealing</code></span></dt>
                           
                           <dd>
                              
                              <p>Whether to automatically heal Amazon EC2 instances that have become disconnected or
                                 timed out.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-installupdatesonboot"></a><span class="term"><code class="code">InstallUpdatesOnBoot</code></span></dt>
                           
                           <dd>
                              
                              <p>Whether to install operating system and package updates when the instance
                                 boots.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-lifecycleeventconfiguration"></a><span class="term"><code class="code">LifecycleEventConfiguration</code></span></dt>
                           
                           <dd>
                              
                              <p>The lifecycle events for the AWS OpsWorks layer.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-opsworks-layer-lifecycleeventconfiguration.html">AWS OpsWorks Layer
                                    LifeCycleConfiguration</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-loadbasedautoscaling"></a><span class="term"><code class="code">LoadBasedAutoScaling</code></span></dt>
                           
                           <dd>
                              
                              <p>The load-based scaling configuration for the AWS OpsWorks layer.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-opsworks-layer-loadbasedautoscaling.html">AWS OpsWorks LoadBasedAutoScaling
                                    Type</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-name"></a><span class="term"><code class="code">Name</code></span></dt>
                           
                           <dd>
                              
                              <p>The AWS OpsWorks layer name.</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-packages"></a><span class="term"><code class="code">Packages</code></span></dt>
                           
                           <dd>
                              
                              <p>The packages for this layer.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of String values
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-shortname"></a><span class="term"><code class="code">Shortname</code></span></dt>
                           
                           <dd>
                              
                              <p>The layer short name, which is used internally by AWS OpsWorks and by Chef recipes.
                                 The short name is also used as the name for the directory where your app files are
                                 installed. 
                              </p>
                              
                              <p>The name can have a maximum of 200 characters, which are limited to the
                                 alphanumeric characters, &apos;-&apos;, &apos;_&apos;, and &apos;.&apos;.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Important</p>
                                 <p>If you update a property that requires the layer to be replaced, you must specify
                                    a new short name. You cannot have multiple layers with the same short name.
                                 </p>
                              </div>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-stackid"></a><span class="term"><code class="code">StackId</code></span></dt>
                           
                           <dd>
                              
                              <p>The ID of the AWS OpsWorks stack that this layer will be associated with.</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                           
                           <dd>
                              
                              <p>Specifies an arbitrary set of tags (key&#x2013;value pairs) to associate with this
                                 AWS OpsWorks layer. Use tags to manage your resources.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-resource-tags.html">AWS CloudFormation Resource Tags</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-type"></a><span class="term"><code class="code">Type</code></span></dt>
                           
                           <dd>
                              
                              <p>The layer type. A stack cannot have more than one layer of the same type,
                                 except for the <code class="code">custom</code> type. You can have any number of
                                 <code class="code">custom</code> types. For more information, see <a href="http://docs.aws.amazon.com/opsworks/latest/APIReference/API_CreateLayer.html" target="_blank">CreateLayer</a> in the
                                 <em>AWS OpsWorks Stacks API Reference</em>.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Important</p>
                                 <p>If you update a property that requires the layer to be replaced, you must
                                    specify a new type unless you have a <code class="code">custom</code> type. You can have any
                                    number of <code class="code">custom</code> types.
                                 </p>
                              </div>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-opsworks-layer-volconfig"></a><span class="term"><code class="code">VolumeConfigurations</code></span></dt>
                           
                           <dd>
                              
                              <p>Describes the Amazon EBS volumes for this layer.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: A list of <a href="aws-properties-opsworks-layer-volumeconfig.html">AWS OpsWorks VolumeConfiguration
                                    Type</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-some-interrupt">Some interruptions</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div><h2 id="w2ab2c21c10d941c11">Return Values</h2><h3 id="w2ab2c21c10d941c11b2">Ref</h3><p>When the logical ID of this resource is provided to the <code class="code">Ref</code> intrinsic
                        function, <code class="code">Ref</code> returns the resource name. For example:
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{ &quot;Ref&quot;: &quot;<em class="replaceable"><code>myLayer</code></em>&quot; }</code></pre><p>For the AWS OpsWorks layer <code class="code">myLayer</code>, <code class="code">Ref</code> returns the AWS OpsWorks
                        layer ID.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="w2ab2c21c10d941c13">Template Examples</h2><h3 id="w2ab2c21c10d941c13b2">AWS OpsWorks PHP Layer</h3><p>The following snippet creates an AWS OpsWorks PHP layer that is associated with the
                        <code class="code">myStack</code> AWS OpsWorks stack. The layer is dependent on the <code class="code">myApp</code>
                        AWS OpsWorks application.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-opsworks-layer-example1.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;myLayer&quot;: {
  &quot;Type&quot;: &quot;AWS::OpsWorks::Layer&quot;,
  &quot;DependsOn&quot;: &quot;myApp&quot;,
  &quot;Properties&quot;: {
    &quot;StackId&quot;: {&quot;Ref&quot;: &quot;myStack&quot;},
    &quot;Type&quot;: &quot;php-app&quot;,
    &quot;Shortname&quot; : &quot;php-app&quot;,
    &quot;EnableAutoHealing&quot; : &quot;true&quot;,
    &quot;AutoAssignElasticIps&quot; : &quot;false&quot;,
    &quot;AutoAssignPublicIps&quot; : &quot;true&quot;,
    &quot;Name&quot;: &quot;MyPHPApp&quot;
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-opsworks-layer-example1.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">myLayer: 
  Type: &quot;AWS::OpsWorks::Layer&quot;
  DependsOn: &quot;myApp&quot;
  Properties: 
    StackId: 
      Ref: &quot;myStack&quot;
    Type: &quot;php-app&quot;
    Shortname: &quot;php-app&quot;
    EnableAutoHealing: &quot;true&quot;
    AutoAssignElasticIps: &quot;false&quot;
    AutoAssignPublicIps: &quot;true&quot;
    Name: &quot;MyPHPApp&quot;</code></pre>
                        </div><h3 id="w2ab2c21c10d941c13b4">Load-based Auto Scaling Layer</h3><p>The following snippet creates a load-based automatic scaling AWS OpsWorks PHP layer
                        that is
                        associated with the <code class="code">myStack</code> AWS OpsWorks stack.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-opsworks-layer-example2.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;myLayer&quot;: {
  &quot;Type&quot;: &quot;AWS::OpsWorks::Layer&quot;,
  &quot;DependsOn&quot;: &quot;myApp&quot;,
  &quot;Properties&quot;: {
    &quot;StackId&quot;: {&quot;Ref&quot;: &quot;myStack&quot;},
    &quot;Type&quot;: &quot;php-app&quot;,
    &quot;Shortname&quot; : &quot;php-app&quot;,
    &quot;EnableAutoHealing&quot; : &quot;true&quot;,
    &quot;AutoAssignElasticIps&quot; : &quot;false&quot;,
    &quot;AutoAssignPublicIps&quot; : &quot;true&quot;,
    &quot;Name&quot;: &quot;MyPHPApp&quot;,
    &quot;LoadBasedAutoScaling&quot; : {
      &quot;Enable&quot; : &quot;true&quot;,
      &quot;UpScaling&quot; : {
        &quot;InstanceCount&quot; : 1,
        &quot;ThresholdsWaitTime&quot; : 1,
        &quot;IgnoreMetricsTime&quot; : 1,
        &quot;CpuThreshold&quot; : 70.0,
        &quot;MemoryThreshold&quot; : 30.0,
        &quot;LoadThreshold&quot; : 0.7
      },
      &quot;DownScaling&quot; : {
        &quot;InstanceCount&quot; : 1,
        &quot;ThresholdsWaitTime&quot; : 1,
        &quot;IgnoreMetricsTime&quot; : 1,
        &quot;CpuThreshold&quot; : 30.0,
        &quot;MemoryThreshold&quot; : 70.0,
        &quot;LoadThreshold&quot; : 0.3
      }
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-opsworks-layer-example2.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">myLayer: 
  Type: &quot;AWS::OpsWorks::Layer&quot;
  DependsOn: &quot;myApp&quot;
  Properties: 
    StackId: 
      Ref: &quot;myStack&quot;
    Type: &quot;php-app&quot;
    Shortname: &quot;php-app&quot;
    EnableAutoHealing: &quot;true&quot;
    AutoAssignElasticIps: &quot;false&quot;
    AutoAssignPublicIps: &quot;true&quot;
    Name: &quot;MyPHPApp&quot;
    LoadBasedAutoScaling: 
      Enable: &quot;true&quot;
      UpScaling: 
        InstanceCount: 1
        ThresholdsWaitTime: 1
        IgnoreMetricsTime: 1
        CpuThreshold: 70
        MemoryThreshold: 30
        LoadThreshold: 0.7
      DownScaling: 
        InstanceCount: 1
        ThresholdsWaitTime: 1
        IgnoreMetricsTime: 1
        CpuThreshold: 30
        MemoryThreshold: 70
        LoadThreshold: 0.3</code></pre>
                        </div><h3 id="aws-resource-opsworks-layer-example3">Specify tags for layers and stacks</h3><p>The following complete template example specifies tags for an AWS OpsWorks layer and
                        stack
                        that reference parameter values.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        
                        <h4 id="aws-resource-opsworks-layer-example3.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
    &quot;Resources&quot;: {
        &quot;ServiceRole&quot;: {
            &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
            &quot;Properties&quot;: {
                &quot;AssumeRolePolicyDocument&quot;: {
                    &quot;Statement&quot;: [
                        {
                            &quot;Effect&quot;: &quot;Allow&quot;,
                            &quot;Principal&quot;: {
                                &quot;Service&quot;: [
                                    {
                                        &quot;Ref&quot;: &quot;OpsServicePrincipal&quot;
                                    }
                                ]
                            },
                            &quot;Action&quot;: [
                                &quot;sts:AssumeRole&quot;
                            ]
                        }
                    ]
                },
                &quot;Path&quot;: &quot;/&quot;,
                &quot;Policies&quot;: [
                    {
                        &quot;PolicyName&quot;: &quot;opsworks-service&quot;,
                        &quot;PolicyDocument&quot;: {
                            &quot;Statement&quot;: [
                                {
                                    &quot;Effect&quot;: &quot;Allow&quot;,
                                    &quot;Action&quot;: [
                                        &quot;ec2:*&quot;,
                                        &quot;iam:PassRole&quot;,
                                        &quot;cloudwatch:GetMetricStatistics&quot;,
                                        &quot;elasticloadbalancing:*&quot;
                                    ],
                                    &quot;Resource&quot;: &quot;*&quot;
                                }
                            ]
                        }
                    }
                ]
            }
        },
        &quot;OpsWorksEC2Role&quot;: {
            &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
            &quot;Properties&quot;: {
                &quot;AssumeRolePolicyDocument&quot;: {
                    &quot;Statement&quot;: [
                        {
                            &quot;Effect&quot;: &quot;Allow&quot;,
                            &quot;Principal&quot;: {
                                &quot;Service&quot;: [
                                    {
                                        &quot;Ref&quot;: &quot;Ec2ServicePrincipal&quot;
                                    }
                                ]
                            },
                            &quot;Action&quot;: [
                                &quot;sts:AssumeRole&quot;
                            ]
                        }
                    ]
                },
                &quot;Path&quot;: &quot;/&quot;
            }
        },
        &quot;InstanceRole&quot;: {
            &quot;Type&quot;: &quot;AWS::IAM::InstanceProfile&quot;,
            &quot;Properties&quot;: {
                &quot;Path&quot;: &quot;/&quot;,
                &quot;Roles&quot;: [
                    {
                        &quot;Ref&quot;: &quot;OpsWorksEC2Role&quot;
                    }
                ]
            }
        },
        &quot;myStack&quot;: {
            &quot;Type&quot;: &quot;AWS::OpsWorks::Stack&quot;,
            &quot;Properties&quot;: {
                &quot;Name&quot;: &quot;TestStack&quot;,
                &quot;ServiceRoleArn&quot;: {
                    &quot;Fn::GetAtt&quot;: [
                        &quot;ServiceRole&quot;,
                        &quot;Arn&quot;
                    ]
                },
                &quot;DefaultInstanceProfileArn&quot;: {
                    &quot;Fn::GetAtt&quot;: [
                        &quot;InstanceRole&quot;,
                        &quot;Arn&quot;
                    ]
                },
                &quot;Tags&quot;: [
                    {
                        &quot;Key&quot;: {
                            &quot;Ref&quot;: &quot;StackKey&quot;
                        },
                        &quot;Value&quot;: {
                            &quot;Ref&quot;: &quot;StackValue&quot;
                        }
                    }
                ]
            }
        },
        &quot;myLayer&quot;: {
            &quot;Type&quot;: &quot;AWS::OpsWorks::Layer&quot;,
            &quot;Properties&quot;: {
                &quot;EnableAutoHealing&quot;: &quot;true&quot;,
                &quot;AutoAssignElasticIps&quot;: &quot;false&quot;,
                &quot;AutoAssignPublicIps&quot;: &quot;true&quot;,
                &quot;StackId&quot;: {
                    &quot;Ref&quot;: &quot;myStack&quot;
                },
                &quot;Type&quot;: &quot;custom&quot;,
                &quot;Shortname&quot;: &quot;shortname&quot;,
                &quot;Name&quot;: &quot;name&quot;,
                &quot;Tags&quot;: [
                    {
                        &quot;Key&quot;: {
                            &quot;Ref&quot;: &quot;LayerKey&quot;
                        },
                        &quot;Value&quot;: {
                            &quot;Ref&quot;: &quot;LayerValue&quot;
                        }
                    }
                ]
            }
        }
    },
    &quot;Parameters&quot;: {
        &quot;StackKey&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        },
        &quot;LayerKey&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        },
        &quot;StackValue&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        },
        &quot;LayerValue&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        },
        &quot;OpsServicePrincipal&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        },
        &quot;Ec2ServicePrincipal&quot;: {
            &quot;Type&quot;: &quot;String&quot;
        }
    }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        
                        <h4 id="aws-resource-opsworks-layer-example3.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">Resources:
  ServiceRole:
    Type: &apos;AWS::IAM::Role&apos;
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - !Ref OpsServicePrincipal
            Action:
              - &apos;sts:AssumeRole&apos;
      Path: /
      Policies:
        - PolicyName: opsworks-service
          PolicyDocument:
            Statement:
              - Effect: Allow
                Action:
                  - &apos;ec2:*&apos;
                  - &apos;iam:PassRole&apos;
                  - &apos;cloudwatch:GetMetricStatistics&apos;
                  - &apos;elasticloadbalancing:*&apos;
                Resource: &apos;*&apos;
  OpsWorksEC2Role:
    Type: &apos;AWS::IAM::Role&apos;
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - !Ref Ec2ServicePrincipal
            Action:
              - &apos;sts:AssumeRole&apos;
      Path: /
  InstanceRole:
    Type: &apos;AWS::IAM::InstanceProfile&apos;
    Properties:
      Path: /
      Roles:
        - !Ref OpsWorksEC2Role
  myStack:
    Type: &apos;AWS::OpsWorks::Stack&apos;
    Properties:
      Name: TestStack
      ServiceRoleArn: !GetAtt 
        - ServiceRole
        - Arn
      DefaultInstanceProfileArn: !GetAtt 
        - InstanceRole
        - Arn
      Tags:
        - Key: !Ref StackKey
          Value: !Ref StackValue
  myLayer:
    Type: &apos;AWS::OpsWorks::Layer&apos;
    Properties:
      EnableAutoHealing: &apos;true&apos;
      AutoAssignElasticIps: &apos;false&apos;
      AutoAssignPublicIps: &apos;true&apos;
      StackId: !Ref myStack
      Type: custom
      Shortname: shortname
      Name: name
      Tags:
        - Key: !Ref LayerKey
          Value: !Ref LayerValue
Parameters:
  StackKey:
    Type: String
  LayerKey:
    Type: String
  StackValue:
    Type: String
  LayerValue:
    Type: String
  OpsServicePrincipal:
    Type: String
  Ec2ServicePrincipal:
    Type: String
</code></pre>
                        </div><h2 id="w2ab2c21c10d941c15">See Also</h2><div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="aws-resource-opsworks-stack.html">AWS::OpsWorks::Stack</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="aws-resource-opsworks-app.html">AWS::OpsWorks::App</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="aws-resource-opsworks-instance.html">AWS::OpsWorks::Instance</a></p>
                              
                           </li>
                        </ul>
                     </div></div>
</body>
</html>