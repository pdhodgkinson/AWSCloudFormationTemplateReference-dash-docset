<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-ec2-flowlog">AWS::EC2::FlowLog</h1><p>The <code class="code">AWS::EC2::FlowLog</code> resource creates an Amazon Elastic Compute Cloud (Amazon EC2) flow log that captures
                        IP traffic for a specified network interface, subnet, or VPC. To view the log data,
                        use Amazon CloudWatch Logs (CloudWatch Logs) to help troubleshoot connection issues.
                        For example, you can use a flow log to investigate why certain traffic isn&apos;t reaching
                        an instance, which can help you diagnose overly restrictive security group rules.
                        For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html">VPC Flow
                           Logs</a> in the <em>Amazon VPC User Guide</em>.
                     </p><div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-ec2-flowlog-syntax">Syntax</a></li>
                           <li><a href="#w2ab1c21c10d111c40b9">Properties</a></li>
                           <li><a href="#w2ab1c21c10d111c40c11">Return Value</a></li>
                           <li><a href="#w2ab1c21c10d111c40c13">Example</a></li>
                        </ul>
                     </div><h2 id="aws-resource-ec2-flowlog-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-ec2-flowlog-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::EC2::FlowLog&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-deliverlogspermissionarn">DeliverLogsPermissionArn</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-logdestination">LogDestination</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-logdestinationtype">LogDestinationType</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-loggroupname">LogGroupName</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-resourceid">ResourceId</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-resourcetype">ResourceType</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-traffictype">TrafficType</a>&quot; : <em class="replaceable"><code>String</code></em>
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-ec2-flowlog-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Type: AWS::EC2::FlowLog
Properties:
  <a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-deliverlogspermissionarn">DeliverLogsPermissionArn</a> : <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-logdestination">LogDestination</a> : <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-logdestinationtype">LogDestinationType</a> : <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-loggroupname">LogGroupName</a> : <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-resourceid">ResourceId</a> : <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-resourcetype">ResourceType</a> : <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ec2-flowlog.html#cfn-ec2-flowlog-traffictype">TrafficType</a> : <em class="replaceable"><code>String</code></em>
</code></pre>
                        </div><h2 id="w2ab1c21c10d111c40b9">Properties</h2><div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-ec2-flowlog-deliverlogspermissionarn"></a><span class="term"><code class="code">DeliverLogsPermissionArn</code></span></dt>
                           
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of an AWS Identity and Access Management (IAM) role
                                 that permits Amazon EC2 to publish flow logs to a CloudWatch Logs log group in your
                                 account.
                              </p>
                              
                              <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify <code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-flowlog-logdestination"></a><span class="term"><code class="code">LogDestination</code></span></dt>
                           
                           <dd>
                              
                              <p>Specifies the destination to which the flow log data is to be published. Flow log
                                 data can be published to a CloudWatch Logs log group or an Amazon S3 bucket. The value
                                 specified for this parameter depends on the value specified for
                                 <code class="code">LogDestinationType</code>.
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p>If <code class="code">LogDestinationType</code> is not specified or <code class="code">cloud-watch-logs</code>, specify the Amazon Resource Name (ARN) of the CloudWatch Logs log group.
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>If <code class="code">LogDestinationType</code> is <code class="code">s3</code>, specify the ARN of the Amazon S3 bucket. You can also specify a subfolder in the
                                          bucket. To specify a subfolder in the bucket, use the following ARN format: <code class="code">bucket_ARN/subfolder_name/</code>. For example, to specify a subfolder named my-logs in a bucket named my-bucket ,
                                          use the following ARN: <code class="code">arn:aws:s3:::my-bucket/my-logs/</code>.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-flowlog-logdestinationtype"></a><span class="term"><code class="code">LogDestinationType</code></span></dt>
                           
                           <dd>
                              
                              <p>Specifies the type of destination to which the flow log data is to be published. Flow
                                 log data can be published to CloudWatch Logs or Amazon S3. To publish flow log data
                                 to CloudWatch Logs, specify <code class="code">cloud-watch-logs</code>. To publish flow log data to Amazon S3, specify <code class="code">s3</code>.
                              </p>
                              
                              <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify <code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-flowlog-loggroupname"></a><span class="term"><code class="code">LogGroupName</code></span></dt>
                           
                           <dd>
                              
                              <p>The name of a new or existing CloudWatch Logs log group where Amazon EC2 publishes
                                 your flow logs.
                              </p>
                              
                              <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify <code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-flowlog-resourceid"></a><span class="term"><code class="code">ResourceId</code></span></dt>
                           
                           <dd>
                              
                              <p>The ID of the subnet, network interface, or VPC for which you want to create a flow
                                 log.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-flowlog-resourcetype"></a><span class="term"><code class="code">ResourceType</code></span></dt>
                           
                           <dd>
                              
                              <p>The type of resource that you specified in the <code class="code">ResourceId</code> property. For example, if you specified a VPC ID for the <code class="code">ResourceId</code> property, specify <code class="code">VPC</code> for this property. For valid values, see the <code class="code">ResourceType</code> parameter for the <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CreateFlowLogs.html">CreateFlowLogs</a> action in the <em>Amazon EC2 API Reference</em>.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ec2-flowlog-traffictype"></a><span class="term"><code class="code">TrafficType</code></span></dt>
                           
                           <dd>
                              
                              <p>The type of traffic to log. You can log traffic that the resource accepts or rejects,
                                 or all traffic. For valid values, see the <code class="code">TrafficType</code> parameter for the <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CreateFlowLogs.html">CreateFlowLogs</a> action in the <em>Amazon EC2 API Reference</em>.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div><h2 id="w2ab1c21c10d111c40c11">Return Value</h2><h3 id="w2ab1c21c10d111c40c11b2">Ref</h3><p>When the logical ID of this resource is provided to the <code class="code">Ref</code> intrinsic function, <code class="code">Ref</code> returns the flow log ID, such as <code class="code">fl-1a23b456</code>.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="w2ab1c21c10d111c40c13">Example</h2><p>The following example creates a flow log for the VPC called <code class="code">MyVPC</code> and logs all traffic types. Amazon EC2 publishes the logs to the <code class="code">FlowLogsGroup</code> log group.
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;MyFlowLog&quot; : {
  &quot;Type&quot; : &quot;AWS::EC2::FlowLog&quot;,
  &quot;Properties&quot; : {
    &quot;DeliverLogsPermissionArn&quot; : { &quot;Fn::GetAtt&quot; : [&quot;FlowLogRole&quot;, &quot;Arn&quot;] },
    &quot;LogGroupName&quot; : &quot;FlowLogsGroup&quot;,
    &quot;ResourceId&quot; : { &quot;Ref&quot; : &quot;MyVPC&quot; },
    &quot;ResourceType&quot; : &quot;VPC&quot;,
    &quot;TrafficType&quot; : &quot;ALL&quot;
  }
}</code></pre></div>
</body>
</html>