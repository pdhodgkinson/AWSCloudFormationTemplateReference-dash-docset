<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-iam-role">AWS::IAM::Role</h1><p>Creates an AWS Identity and Access Management (IAM) role. Use an IAM role to enable
                        applications running on an EC2 instance to securely access your AWS resources.
                     </p><p>For more information about IAM roles, see <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/WorkingWithRoles.html" target="_blank">Working with Roles</a> in the
                        <em>AWS Identity and Access Management User Guide</em>.
                     </p><div class="highlights">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-iam-role-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c19c12d561c13">Properties</a></li>
                           <li><a href="#w2ab2c19c12d561c15">Return Values</a></li>
                           <li><a href="#cfn-iam-role-templateexamples">Template Examples</a></li>
                           <li><a href="#w2ab2c19c12d561c19">See Also</a></li>
                        </ul>
                     </div><h2 id="aws-resource-iam-role-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-iam-role-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight">{
  &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
  &quot;Properties&quot;: {
    &quot;<a href="aws-resource-iam-role.html#cfn-iam-role-assumerolepolicydocument">AssumeRolePolicyDocument</a>&quot;: { <em class="replaceable"><code>JSON</code></em> },
    &quot;<a href="aws-resource-iam-role.html#cfn-iam-role-managepolicyarns"><code class="code">ManagedPolicyArns</code></a>&quot;: [ <em class="replaceable"><code>String, ...</code></em> ],
    &quot;<a href="aws-resource-iam-role.html#cfn-iam-role-path">Path</a>&quot;: <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-iam-role.html#cfn-iam-role-policies">Policies</a>&quot;: [ <em class="replaceable"><code>Policies, ...</code></em> ],
    &quot;<a href="aws-resource-iam-role.html#cfn-iam-role-rolename"><code class="code">RoleName</code></a>&quot;: <em class="replaceable"><code>String</code></em>
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-iam-role-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight">Type: &quot;AWS::IAM::Role&quot;
Properties: 
  <a href="aws-resource-iam-role.html#cfn-iam-role-assumerolepolicydocument">AssumeRolePolicyDocument</a>:
    <em class="replaceable"><code>JSON object</code></em>
  <a href="aws-resource-iam-role.html#cfn-iam-role-managepolicyarns"><code class="code">ManagedPolicyArns</code></a>:
    - <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-iam-role.html#cfn-iam-role-path">Path</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-iam-role.html#cfn-iam-role-policies">Policies</a>:
    - <em class="replaceable"><code>Policies</code></em>
  <a href="aws-resource-iam-role.html#cfn-iam-role-rolename"><code class="code">RoleName</code></a>: <em class="replaceable"><code>String</code></em>
</code></pre>
                        </div><h2 id="w2ab2c19c12d561c13">Properties</h2><div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-iam-role-assumerolepolicydocument"></a><span class="term"><code class="code">AssumeRolePolicyDocument</code></span></dt>
                           
                           <dd>
                              
                              <p>The trust policy that is associated with this role.</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: A JSON policy document
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>AWS Identity and Access Management (IAM) requires that policies be in JSON format.
                                    However, for templates formatted in YAML, you can create an IAM policy in either JSON
                                    or YAML format. AWS CloudFormation always converts a policy to JSON format before
                                    submitting it to IAM.
                                 </p>
                              </div>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>You can associate only one assume role policy with a role. For an example of
                                    an assume role policy, see <a href="aws-resource-iam-role.html#cfn-iam-role-templateexamples">Template Examples</a>.
                                 </p>
                              </div>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-iam-role-managepolicyarns"></a><span class="term"><code class="code">ManagedPolicyArns</code></span></dt>
                           
                           <dd>
                              
                              <p>One or more managed policy ARNs to attach to this role.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of strings
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-iam-role-path"></a><span class="term"><code class="code">Path</code></span></dt>
                           
                           <dd>
                              
                              <p>The path associated with this role. For information about IAM paths, see
                                 <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/Using_Identifiers.html#Identifiers_FriendlyNames" target="_blank">Friendly Names and Paths</a> in
                                 <em>IAM User Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-iam-role-policies"></a><span class="term"><code class="code">Policies</code></span></dt>
                           
                           <dd>
                              
                              <p>The policies to associate with this role. For sample templates, see <a href="aws-resource-iam-role.html#cfn-iam-role-templateexamples">Template Examples</a>.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Important</p>
                                 <p>The name of each policy for a role, user, or group must be unique. If you don&apos;t, updates
                                    to the IAM role will fail. 
                                 </p>
                              </div>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>If an external policy (such as <code class="code">AWS::IAM::Policy</code> or <code class="code">AWS::IAM::ManagedPolicy</code>) has a <code class="code">Ref</code> to a role and if a resource (such as <code class="code">AWS::ECS::Service</code>) also has a <code class="code">Ref</code> to the same role, add a <code class="code">DependsOn</code> attribute to the resource to make the resource depend on the external policy. This
                                    dependency ensures that the role&apos;s policy is available throughout the resource&apos;s lifecycle.
                                    For example, when you delete a
                                    stack with an <code class="code">AWS::ECS::Service</code> resource, the <code class="code">DependsOn</code> attribute ensures that AWS CloudFormation deletes the <code class="code">AWS::ECS::Service</code> resource  before deleting its role&apos;s policy.
                                 </p>
                              </div>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-iam-policy.html">IAM Policies</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-iam-role-rolename"></a><span class="term"><code class="code">RoleName</code></span></dt>
                           
                           <dd>
                              
                              <p>A name for the IAM role. For valid values, see the <code class="code">RoleName</code> parameter for the <a href="http://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateRole.html" target="_blank"><code class="code">CreateRole</code></a> action in the <em>IAM API Reference</em>. If you don&apos;t specify a name, AWS CloudFormation generates a unique physical ID and
                                 uses that ID for the group name.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Important</p>
                                 <p>If you specify a name, you cannot perform updates that require replacement of this
                                    resource.
                                    You can perform updates that require no or some interruption. If you must replace
                                    the resource, specify a new name.
                                 </p>
                              </div>
                              
                              <p>If you specify a name, you must specify the <code class="code">CAPABILITY_NAMED_IAM</code> value to acknowledge your template&apos;s capabilities. For more information, see <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-iam-template.html#using-iam-capabilities">Acknowledging IAM Resources in AWS CloudFormation Templates</a>. 
                              </p>
                              <div class="aws-note">
                                 <p class="aws-note">Warning</p>
                                 <p>Naming an IAM resource can cause an unrecoverable error if you reuse the same template
                                    in multiple regions. To prevent this, we recommend using <code class="code">Fn::Join</code> and <code class="code">AWS::Region</code> to create a region-specific name, as in the following example: <code class="code">{&quot;Fn::Join&quot;: [&quot;&quot;, [{&quot;Ref&quot;: &quot;AWS::Region&quot;}, {&quot;Ref&quot;: &quot;MyResourceName&quot;}]]}</code>.
                                 </p>
                              </div>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div><h3 id="cfn-iam-role-policynotes">Notes on policies for IAM roles</h3><p>For general information about IAM policies and policy documents, see <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/AccessPolicyLanguage_HowToWritePolicies.html" target="_blank">How to Write a Policy</a> in <em>IAM User Guide</em>.
                     </p><h2 id="w2ab2c19c12d561c15">Return Values</h2><h3 id="w2ab2c19c12d561c15b3">Ref</h3><p>When the logical ID of this resource is provided to the <code class="code">Ref</code> intrinsic
                        function, <code class="code">Ref</code> returns the resource name. For example:
                     </p><pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight">{ &quot;Ref&quot;: &quot;<em class="replaceable"><code>RootRole</code></em>&quot; }</code></pre><p>For the IAM::Role with the logical ID &quot;RootRole&quot;, <code class="code">Ref</code> will return the resource
                        name.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h3 id="w2ab2c19c12d561c15b5">Fn::GetAtt</h3><p><code class="code">Fn::GetAtt</code> returns a value for a specified attribute of this type.
                        The following are the available attributes and sample return values.
                     </p><div class="variablelist">
                        
                        
                        <dl>
                           
                           <dt><span class="term"><code class="literal">Arn</code></span></dt>
                           
                           <dd>
                              
                              <p>Returns the Amazon Resource Name (ARN) for the instance profile. For example:</p>
                              <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">{&quot;Fn::GetAtt&quot; : [&quot;MyRole&quot;, &quot;Arn&quot;] }</code></pre>
                              <p>This will return a value such as <code class="code">&#x201C;arn:aws:iam::1234567890:role/MyRole-AJJHDSKSDF&#x201D;</code>.
                              </p>
                              
                           </dd>
                           
                        </dl>
                     </div><p>For more information about using <code class="code">Fn::GetAtt</code>, see <a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.
                     </p><h2 id="cfn-iam-role-templateexamples">Template Examples</h2><h3 id="w2ab2c19c12d561c17b5">IAM Role with Embedded Policy and Instance Profiles</h3><p>This example shows an embedded Policy in the IAM::Role. The policy is specified inline
                        in the IAM::Role Policies
                        property.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-iam-role-example1.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">{
   &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
   &quot;Resources&quot;: {
      &quot;RootRole&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
         &quot;Properties&quot;: {
            &quot;AssumeRolePolicyDocument&quot;: {
               &quot;Version&quot; : &quot;2012-10-17&quot;,
               &quot;Statement&quot;: [ {
                  &quot;Effect&quot;: &quot;Allow&quot;,
                  &quot;Principal&quot;: {
                     &quot;Service&quot;: [ &quot;ec2.amazonaws.com&quot; ]
                  },
                  &quot;Action&quot;: [ &quot;sts:AssumeRole&quot; ]
               } ]
            },
            &quot;Path&quot;: &quot;/&quot;,
            &quot;Policies&quot;: [ {
               &quot;PolicyName&quot;: &quot;root&quot;,
               &quot;PolicyDocument&quot;: {
                  &quot;Version&quot; : &quot;2012-10-17&quot;,
                  &quot;Statement&quot;: [ {
                     &quot;Effect&quot;: &quot;Allow&quot;,
                     &quot;Action&quot;: &quot;*&quot;,
                     &quot;Resource&quot;: &quot;*&quot;
                  } ]
               }
               } ]
            }
      },
      &quot;RootInstanceProfile&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::InstanceProfile&quot;,
         &quot;Properties&quot;: {
            &quot;Path&quot;: &quot;/&quot;,
            &quot;Roles&quot;: [ {
               &quot;Ref&quot;: &quot;RootRole&quot;
            } ]
         }
      }
   }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-iam-role-example1.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">AWSTemplateFormatVersion: &quot;2010-09-09&quot;
Resources: 
  RootRole: 
    Type: &quot;AWS::IAM::Role&quot;
    Properties: 
      AssumeRolePolicyDocument: 
        Version: &quot;2012-10-17&quot;
        Statement: 
          - 
            Effect: &quot;Allow&quot;
            Principal: 
              Service: 
                - &quot;ec2.amazonaws.com&quot;
            Action: 
              - &quot;sts:AssumeRole&quot;
      Path: &quot;/&quot;
      Policies: 
        - 
          PolicyName: &quot;root&quot;
          PolicyDocument: 
            Version: &quot;2012-10-17&quot;
            Statement: 
              - 
                Effect: &quot;Allow&quot;
                Action: &quot;*&quot;
                Resource: &quot;*&quot;
  RootInstanceProfile: 
    Type: &quot;AWS::IAM::InstanceProfile&quot;
    Properties: 
      Path: &quot;/&quot;
      Roles: 
        - 
          Ref: &quot;RootRole&quot;</code></pre>
                        </div><h3 id="w2ab2c19c12d561c17b9">IAM Role with External Policy and Instance Profiles</h3><p>In this example, the Policy and InstanceProfile resources are specified externally
                        to the IAM Role. They refer
                        to the role by specifying its name, &quot;RootRole&quot;, in their respective Roles properties.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-iam-role-example2.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">{
   &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
   &quot;Resources&quot;: {
      &quot;RootRole&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
         &quot;Properties&quot;: {
            &quot;AssumeRolePolicyDocument&quot;: {
               &quot;Version&quot; : &quot;2012-10-17&quot;,
               &quot;Statement&quot;: [ {
                  &quot;Effect&quot;: &quot;Allow&quot;,
                  &quot;Principal&quot;: {
                     &quot;Service&quot;: [ &quot;ec2.amazonaws.com&quot; ]
                  },
                  &quot;Action&quot;: [ &quot;sts:AssumeRole&quot; ]
               } ]
            },
            &quot;Path&quot;: &quot;/&quot;
         }
      },
      &quot;RolePolicies&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::Policy&quot;,
         &quot;Properties&quot;: {
            &quot;PolicyName&quot;: &quot;root&quot;,
            &quot;PolicyDocument&quot;: {
               &quot;Version&quot; : &quot;2012-10-17&quot;,
               &quot;Statement&quot;: [ {
                  &quot;Effect&quot;: &quot;Allow&quot;,
                  &quot;Action&quot;: &quot;*&quot;,
                  &quot;Resource&quot;: &quot;*&quot;
               } ]
            },
            &quot;Roles&quot;: [ {
               &quot;Ref&quot;: &quot;RootRole&quot;
            } ]
         }
      },
      &quot;RootInstanceProfile&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::InstanceProfile&quot;,
         &quot;Properties&quot;: {
            &quot;Path&quot;: &quot;/&quot;,
            &quot;Roles&quot;: [ {
               &quot;Ref&quot;: &quot;RootRole&quot;
            } ]
         }
      }
   }
}  </code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-iam-role-example2.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">AWSTemplateFormatVersion: &quot;2010-09-09&quot;
Resources: 
  RootRole: 
    Type: &quot;AWS::IAM::Role&quot;
    Properties: 
      AssumeRolePolicyDocument: 
        Version: &quot;2012-10-17&quot;
        Statement: 
          - 
            Effect: &quot;Allow&quot;
            Principal: 
              Service: 
                - &quot;ec2.amazonaws.com&quot;
            Action: 
              - &quot;sts:AssumeRole&quot;
      Path: &quot;/&quot;
  RolePolicies: 
    Type: &quot;AWS::IAM::Policy&quot;
    Properties: 
      PolicyName: &quot;root&quot;
      PolicyDocument: 
        Version: &quot;2012-10-17&quot;
        Statement: 
          - 
            Effect: &quot;Allow&quot;
            Action: &quot;*&quot;
            Resource: &quot;*&quot;
      Roles: 
        - 
          Ref: &quot;RootRole&quot;
  RootInstanceProfile: 
    Type: &quot;AWS::IAM::InstanceProfile&quot;
    Properties: 
      Path: &quot;/&quot;
      Roles: 
        - 
          Ref: &quot;RootRole&quot;
</code></pre>
                        </div><h2 id="w2ab2c19c12d561c19">See Also</h2><div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-iam.html">AWS Identity and Access Management Template Snippets</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="aws-resource-iam-instanceprofile.html">AWS::IAM::InstanceProfile</a></p>
                              
                           </li>
                        </ul>
                     </div></div>
</body>
</html>