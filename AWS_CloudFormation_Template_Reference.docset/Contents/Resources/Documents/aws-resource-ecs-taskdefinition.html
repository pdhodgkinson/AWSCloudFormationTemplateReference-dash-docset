<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-ecs-taskdefinition">AWS::ECS::TaskDefinition</h1><p>The <code class="code">AWS::ECS::TaskDefinition</code> resource describes the container and volume
                        definitions of an Amazon Elastic Container Service (Amazon ECS) task. You can specify
                        which Docker images to use, the
                        required resources, and other configurations related to launching the task definition
                        through an
                        Amazon ECS service or task.
                     </p><div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-ecs-taskdefinition-syntax">Syntax</a></li>
                           <li><a href="#aws-resource-ecs-taskdefinition-properties">Properties</a></li>
                           <li><a href="#aws-resource-ecs-taskdefinition-returnvalues">Return Value</a></li>
                           <li><a href="#aws-resource-ecs-taskdefinition-examples">Examples</a></li>
                           <li><a href="#aws-resource-ecs-taskdefinition-seealso">See Also</a></li>
                        </ul>
                     </div><h2 id="aws-resource-ecs-taskdefinition-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-ecs-taskdefinition-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::ECS::TaskDefinition&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-volumes"><code class="code">Volumes</code></a>&quot; : [ <em class="replaceable"><code>Volume Definition, ...</code></em> ],
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-cpu"><code class="code">Cpu</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-executionrolearn"><code class="code">ExecutionRoleArn</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-family"><code class="code">Family</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-memory"><code class="code">Memory</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-networkmode"><code class="code">NetworkMode</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-placementconstraints"><code class="code">PlacementConstraints</code></a>&quot; : <em class="replaceable"><code>TaskDefinitionPlacementConstraint</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-requirescompatibilities"><code class="code">RequiresCompatibilities</code></a>&quot; : [ <em class="replaceable"><code>String, ...</code></em> ],
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-taskrolearn"><code class="code">TaskRoleArn</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-containerdefinition"><code class="code">ContainerDefinitions</code></a>&quot; : [ <em class="replaceable"><code>Container Definition, ...</code></em> ]
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-ecs-taskdefinition-syntax.yaml">YAML</h3>
                        
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Type: &quot;AWS::ECS::TaskDefinition&quot;
Properties: 
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-volumes"><code class="code">Volumes</code></a>:
    - <em class="replaceable"><code>Volume Definition</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-cpu"><code class="code">Cpu</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-executionrolearn"><code class="code">ExecutionRoleArn</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-family"><code class="code">Family</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-memory"><code class="code">Memory</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-networkmode"><code class="code">NetworkMode</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-placementconstraints"><code class="code">PlacementConstraints</code></a>:
    - <em class="replaceable"><code>TaskDefinitionPlacementConstraint</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-requirescompatibilities"><code class="code">RequiresCompatibilities</code></a>:
    - <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-taskrolearn"><code class="code">TaskRoleArn</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-containerdefinition"><code class="code">ContainerDefinitions</code></a>:
    - <em class="replaceable"><code>Container Definition</code></em></code></pre>
                        </div><h2 id="aws-resource-ecs-taskdefinition-properties">Properties</h2><p>For more information on properties and valid parameters, see <a href="http://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_RegisterTaskDefinition.html" target="_blank">RegisterTaskDefinition</a> in the <em>Amazon Elastic Container Service API Reference</em>.
                     </p><div class="variablelist">    
                               
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-ecs-taskdefinition-containerdefinition"></a><span class="term"><code class="code">ContainerDefinitions</code></span></dt>
                           
                           <dd>
                              
                              <p>A list of container definitions in JSON format that describes the containers
                                 that make up your task.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-ecs-taskdefinition-containerdefinitions.html">Amazon Elastic Container Service TaskDefinition ContainerDefinition</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-cpu"></a><span class="term"><code class="code">Cpu</code></span></dt>
                           
                           <dd>
                              
                              <p>The number of <code class="code">cpu</code> units used by the task. If using the EC2 launch type, this field is optional and
                                 any value can be used. If you are using the Fargate launch type, this field is required
                                 and you must use one of the following values, which determines your range of valid
                                 values for the <code class="code">memory</code> parameter:
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p>256 (.25 vCPU) - Available <code class="code">memory</code> values: 0.5GB, 1GB, 2GB
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>512 (.5 vCPU) - Available <code class="code">memory</code> values: 1GB, 2GB, 3GB, 4GB
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>1024 (1 vCPU) - Available <code class="code">memory</code> values: 2GB, 3GB, 4GB, 5GB, 6GB, 7GB, 8GB
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>2048 (2 vCPU) - Available <code class="code">memory</code> values: Between 4GB and 16GB in 1GB increments
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>4096 (4 vCPU) - Available <code class="code">memory</code> values: Between 8GB and 30GB in 1GB increments
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-executionrolearn"></a><span class="term"><code class="code">ExecutionRoleArn</code></span></dt>
                           
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of the task execution role that containers in this
                                 task can assume. All containers in this task are granted the permissions that are
                                 specified in this role.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-family"></a><span class="term"><code class="code">Family</code></span></dt>
                           
                           <dd>
                              
                              <p>The name of a family that this task definition is registered to. A
                                 <em>family</em> groups multiple versions of a task definition. Amazon ECS gives
                                 the first task definition that you registered to a family a revision number of 1.
                                 Amazon ECS
                                 gives sequential revision numbers to each task definition that you add.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>To use revision numbers when you update a task definition, specify this property.
                                    If you don&apos;t specify a value, AWS CloudFormation generates a new task definition each
                                    time that you
                                    update it.
                                 </p>
                              </div>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-memory"></a><span class="term"><code class="code">Memory</code></span></dt>
                           
                           <dd>
                              
                              <p>The amount (in MiB) of memory used by the task. If using the EC2 launch type, this
                                 field is optional and any value can be used. If you are using the Fargate launch type,
                                 this field is required and you must use one of the following values, which determines
                                 your range of valid values for the <code class="code">cpu</code> parameter:
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p>0.5GB, 1GB, 2GB - Available <code class="code">cpu</code> values: 256 (.25 vCPU)
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>1GB, 2GB, 3GB, 4GB - Available <code class="code">cpu</code> values: 512 (.5 vCPU)
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>2GB, 3GB, 4GB, 5GB, 6GB, 7GB, 8GB - Available <code class="code">cpu</code> values: 1024 (1 vCPU)
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>Between 4GB and 16GB in 1GB increments - Available <code class="code">cpu</code> values: 2048 (2 vCPU)
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>Between 8GB and 30GB in 1GB increments - Available <code class="code">cpu</code> values: 4096 (4 vCPU)
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-networkmode"></a><span class="term"><code class="code">NetworkMode</code></span></dt>
                           
                           <dd>
                              
                              <p>The Docker networking mode to use for the containers in the task, such as
                                 <code class="code">none</code>, <code class="code">bridge</code>, or <code class="code">host</code>. For information about
                                 network modes, see <a href="http://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_RegisterTaskDefinition.html" target="_blank"><code class="code">NetworkMode</code></a> in the <a href="http://docs.aws.amazon.com/AmazonECS/latest/developerguide//task_definition_parameters.html" target="_blank">Task Definition Parameters</a>
                                 topic in the <em>Amazon Elastic Container Service Developer Guide</em>.
                              </p>
                              
                              
                              <p>For Fargate launch types, you can specify <code class="code">awsvpc</code> only. 
                                 The <code class="code">none</code>, <code class="code">bridge</code>, or <code class="code">host</code> option won&apos;t work for Fargate launch types.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-placementconstraints"></a><span class="term"><code class="code">PlacementConstraints</code></span></dt>
                           
                           <dd>
                              
                              <p>The placement constraints for the tasks in the service.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-ecs-taskdefinition-placementconstraints-taskdefinitionplacementconstraint.html">Amazon Elastic Container Service Service
                                    PlacementConstraint</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-requirescompatibilities"></a><span class="term"><code class="code">RequiresCompatibilities</code></span></dt>
                           
                           <dd>
                              
                              <p>The launch type the task requires. If no value is specified, it will default to <code class="code">EC2</code>. Valid values include <code class="code">EC2</code> and <code class="code">FARGATE</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of Strings
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-taskrolearn"></a><span class="term"><code class="code">TaskRoleArn</code></span></dt>
                           
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of an AWS Identity and Access Management (IAM) role
                                 that grants containers in the task permission to call AWS APIs on your behalf. For
                                 more information, see <a href="http://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-iam-roles.html" target="_blank">IAM Roles for Tasks</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-volumes"></a><span class="term"><code class="code">Volumes</code></span></dt>
                           
                           <dd>
                              
                              <p>A list of volume definitions in JSON format for the volumes that you can use in
                                 your container definitions.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-ecs-taskdefinition-volumes.html">Amazon Elastic Container Service TaskDefinition
                                    Volumes</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div><h2 id="aws-resource-ecs-taskdefinition-returnvalues">Return Value</h2><h3 id="aws-resource-ecs-taskdefinition-ref">Ref</h3><p>When the logical ID of this resource is provided to the <code class="code">Ref</code> intrinsic
                        function, <code class="code">Ref</code> returns the Amazon Resource Name (ARN).
                     </p><p>In the following example, the <code class="code">Ref</code> function returns the ARN of the
                        <code class="code">MyTaskDefinition</code> task, such as
                        <code class="code">arn:aws:ecs:us-west-2:123456789012:task/1abf0f6d-a411-4033-b8eb-a4eed3ad252a</code>.
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{ &quot;Ref&quot;: &quot;MyTaskDefinition&quot; }</code></pre><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="aws-resource-ecs-taskdefinition-examples">Examples</h2><h3 id="aws-resource-ecs-taskdefinition-example1"></h3><p>The following example defines an Amazon ECS task definition, which includes two container
                        definitions and one volume definition.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-ecs-taskdefinition-example.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;taskdefinition&quot;: {
  &quot;Type&quot;: &quot;AWS::ECS::TaskDefinition&quot;,
  &quot;Properties&quot; : {
    &quot;ContainerDefinitions&quot; : [
    {
      &quot;Name&quot;: {&quot;Ref&quot;: &quot;AppName&quot;},
      &quot;MountPoints&quot;: [
        {
          &quot;SourceVolume&quot;: &quot;my-vol&quot;,
          &quot;ContainerPath&quot;: &quot;/var/www/my-vol&quot;
        }
      ],
      &quot;Image&quot;:&quot;amazon/amazon-ecs-sample&quot;,
      &quot;Cpu&quot;: &quot;10&quot;,
      &quot;PortMappings&quot;:[
        {
          &quot;ContainerPort&quot;: {&quot;Ref&quot;:&quot;AppContainerPort&quot;},
          &quot;HostPort&quot;: {&quot;Ref&quot;:&quot;AppHostPort&quot;}
        }
      ],
      &quot;EntryPoint&quot;: [
        &quot;/usr/sbin/apache2&quot;,
        &quot;-D&quot;,
        &quot;FOREGROUND&quot;
      ],
      &quot;Memory&quot;:&quot;500&quot;,
      &quot;Essential&quot;: &quot;true&quot;
    },
    {
      &quot;Name&quot;: &quot;busybox&quot;,
      &quot;Image&quot;: &quot;busybox&quot;,
      &quot;Cpu&quot;: &quot;10&quot;,
      &quot;EntryPoint&quot;: [
        &quot;sh&quot;,
        &quot;-c&quot;
      ],
      &quot;Memory&quot;: &quot;500&quot;,
      &quot;Command&quot;: [
        &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
      ],
      &quot;Essential&quot; : &quot;false&quot;,
      &quot;VolumesFrom&quot;: [
        {
          &quot;SourceContainer&quot;: {&quot;Ref&quot;:&quot;AppName&quot;}
        }
      ]
    }],
    &quot;Volumes&quot;: [
    {
      &quot;Host&quot;: {
        &quot;SourcePath&quot;: &quot;/var/lib/docker/vfs/dir/&quot;
      },
      &quot;Name&quot;: &quot;my-vol&quot;
    }]
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-ecs-taskdefinition-example.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">taskdefinition: 
  Type: &quot;AWS::ECS::TaskDefinition&quot;
  Properties: 
    ContainerDefinitions: 
      - 
        Name: 
          Ref: &quot;AppName&quot;
        MountPoints: 
          - 
            SourceVolume: &quot;my-vol&quot;
            ContainerPath: &quot;/var/www/my-vol&quot;
        Image: &quot;amazon/amazon-ecs-sample&quot;
        Cpu: &quot;10&quot;
        PortMappings: 
          - 
            ContainerPort: 
              Ref: &quot;AppContainerPort&quot;
            HostPort: 
              Ref: &quot;AppHostPort&quot;
        EntryPoint: 
          - &quot;/usr/sbin/apache2&quot;
          - &quot;-D&quot;
          - &quot;FOREGROUND&quot;
        Memory: &quot;500&quot;
        Essential: &quot;true&quot;
      - 
        Name: &quot;busybox&quot;
        Image: &quot;busybox&quot;
        Cpu: &quot;10&quot;
        EntryPoint: 
          - &quot;sh&quot;
          - &quot;-c&quot;
        Memory: &quot;500&quot;
        Command: 
          - &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
        Essential: &quot;false&quot;
        VolumesFrom: 
          - 
            SourceContainer: 
              Ref: &quot;AppName&quot;
    Volumes: 
      - 
        Host: 
          SourcePath: &quot;/var/lib/docker/vfs/dir/&quot;
        Name: &quot;my-vol&quot;</code></pre>
                        </div><h3 id="aws-resource-ecs-taskdefinition-example2"></h3><p>The following example defines an Amazon ECS task definition that specifies <code class="code">EC2</code> and <code class="code">FARGATE</code> as required compatibilities.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-ecs-taskdefinition-example2.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
  &quot;Resources&quot;: {
    &quot;taskdefinition&quot;: {
      &quot;Type&quot;: &quot;AWS::ECS::TaskDefinition&quot;,
      &quot;Properties&quot;: {
        &quot;RequiresCompatibilities&quot;: [
          &quot;EC2&quot;,
          &quot;FARGATE&quot;
        ],
        &quot;ContainerDefinitions&quot;: [
          {
            &quot;Name&quot;: &quot;my-app&quot;,
            &quot;MountPoints&quot;: [
              {
                &quot;SourceVolume&quot;: &quot;my-vol&quot;,
                &quot;ContainerPath&quot;: &quot;/var/www/my-vol&quot;
              }
            ],
            &quot;Image&quot;: &quot;amazon/amazon-ecs-sample&quot;,
            &quot;Cpu&quot;: &quot;10&quot;,
            &quot;EntryPoint&quot;: [
              &quot;/usr/sbin/apache2&quot;,
              &quot;-D&quot;,
              &quot;FOREGROUND&quot;
            ],
            &quot;Memory&quot;: &quot;500&quot;,
            &quot;Essential&quot;: &quot;true&quot;
          },
          {
            &quot;Name&quot;: &quot;busybox&quot;,
            &quot;Image&quot;: &quot;busybox&quot;,
            &quot;Cpu&quot;: &quot;10&quot;,
            &quot;EntryPoint&quot;: [
              &quot;sh&quot;,
              &quot;-c&quot;
            ],
            &quot;Memory&quot;: &quot;500&quot;,
            &quot;Command&quot;: [
              &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
            ],
            &quot;Essential&quot;: &quot;false&quot;,
            &quot;VolumesFrom&quot;: [
              {
                &quot;SourceContainer&quot;: &quot;my-app&quot;
              }
            ]
          }
        ],
        &quot;Volumes&quot;: [
          {
            &quot;Host&quot;: {
              &quot;SourcePath&quot;: &quot;/var/lib/docker/vfs/dir/&quot;
            },
            &quot;Name&quot;: &quot;my-vol&quot;
          }
        ]
      }
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-ecs-taskdefinition-example2.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Resources:
  taskdefinition: 
    Type: &quot;AWS::ECS::TaskDefinition&quot;
    Properties: 
      RequiresCompatibilities:
        - &quot;EC2&quot;
        - &quot;FARGATE&quot;
      ContainerDefinitions: 
        - 
          Name: &quot;my-app&quot;
          MountPoints: 
            - 
              SourceVolume: &quot;my-vol&quot;
              ContainerPath: &quot;/var/www/my-vol&quot;
          Image: &quot;amazon/amazon-ecs-sample&quot;
          Cpu: &quot;10&quot;
          EntryPoint: 
            - &quot;/usr/sbin/apache2&quot;
            - &quot;-D&quot;
            - &quot;FOREGROUND&quot;
          Memory: &quot;500&quot;
          Essential: &quot;true&quot;
        - 
          Name: &quot;busybox&quot;
          Image: &quot;busybox&quot;
          Cpu: &quot;10&quot;
          EntryPoint: 
            - &quot;sh&quot;
            - &quot;-c&quot;
          Memory: &quot;500&quot;
          Command: 
            - &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
          Essential: &quot;false&quot;
          VolumesFrom: 
            - 
              SourceContainer: &quot;my-app&quot;
      Volumes: 
        - 
          Host: 
            SourcePath: &quot;/var/lib/docker/vfs/dir/&quot;
          Name: &quot;my-vol&quot;</code></pre>
                        </div><h2 id="aws-resource-ecs-taskdefinition-seealso">See Also</h2><p>For a complete sample template that shows how you can create an Amazon ECS cluster
                        and
                        service, see <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-ecs.html">Amazon Elastic Container Service Template Snippets</a>.
                     </p></div>
</body>
</html>