<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-ecs-taskdefinition">AWS::ECS::TaskDefinition</h1><p>The <code class="code">AWS::ECS::TaskDefinition</code>
                        resource
                        describes the container and volume definitions of an Amazon EC2 Container Service (Amazon ECS) task.
                        You can specify which Docker images to use, the required resources, and other configurations
                        related to launching the task definition through an Amazon ECS service or task.
                     </p><div class="highlights">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-ecs-taskdefinition-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c21c10d518b9">Properties</a></li>
                           <li><a href="#w2ab2c21c10d518c11">Return Value</a></li>
                           <li><a href="#w2ab2c21c10d518c13">Example</a></li>
                           <li><a href="#w2ab2c21c10d518c15">More Info</a></li>
                        </ul>
                     </div><h2 id="aws-resource-ecs-taskdefinition-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-ecs-taskdefinition-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::ECS::TaskDefinition&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-volumes"><code class="code">Volumes</code></a>&quot; : [ <em class="replaceable"><code>Volume Definition, ...</code></em> ],
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-family"><code class="code">Family</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-networkmode"><code class="code">NetworkMode</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-placementconstraints"><code class="code">PlacementConstraints</code></a>&quot; : <em class="replaceable"><code>TaskDefinitionPlacementConstraint</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-taskrolearn"><code class="code">TaskRoleArn</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-containerdefinition"><code class="code">ContainerDefinitions</code></a>&quot; : [ <em class="replaceable"><code>Container Definition, ...</code></em> ]
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-ecs-taskdefinition-syntax.yaml">YAML</h3>
                        
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight">Type: &quot;AWS::ECS::TaskDefinition&quot;
Properties: 
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-volumes"><code class="code">Volumes</code></a>:
    - <em class="replaceable"><code>Volume Definition</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-family"><code class="code">Family</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-networkmode"><code class="code">NetworkMode</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-placementconstraints"><code class="code">PlacementConstraints</code></a>:
   - <em class="replaceable"><code>TaskDefinitionPlacementConstraint</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-taskrolearn"><code class="code">TaskRoleArn</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-containerdefinition"><code class="code">ContainerDefinitions</code></a>:
    - <em class="replaceable"><code>Container Definition</code></em></code></pre>
                        </div><h2 id="w2ab2c21c10d518b9">Properties</h2><div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-ecs-taskdefinition-volumes"></a><span class="term"><code class="code">Volumes</code></span></dt>
                           
                           <dd>
                              
                              <p>A list of volume definitions
                                 in
                                 JSON format for the volumes that you can use in your container
                                 definitions.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-ecs-taskdefinition-volumes.html">Amazon EC2 Container Service TaskDefinition
                                    Volumes</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-family"></a><span class="term"><code class="code">Family</code></span></dt>
                           
                           <dd>
                              
                              <p>The name of a family that this task definition is registered to. A
                                 <em>family</em> groups multiple versions of a task definition. Amazon ECS gives
                                 the first task definition that you registered to a family a revision number of 1.
                                 Amazon ECS
                                 gives sequential revision numbers to each task definition that you add.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>To use revision numbers when you update a task definition, specify this property.
                                    If you don&apos;t specify a value, AWS CloudFormation generates a new task definition each
                                    time that you
                                    update
                                    it.
                                 </p>
                              </div>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-networkmode"></a><span class="term"><code class="code">NetworkMode</code></span></dt>
                           
                           <dd>
                              
                              <p>The Docker networking mode to use for the containers in the task, such as
                                 <code class="code">none</code>, <code class="code">bridge</code>, or <code class="code">host</code>. For information about
                                 network modes, see <a href="http://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_RegisterTaskDefinition.html" target="_blank"><code class="code">NetworkMode</code></a> in the <a href="http://docs.aws.amazon.com/AmazonECS/latest/developerguide//task_definition_parameters.html" target="_blank">Task Definition Parameters</a>
                                 topic in the <em>Amazon EC2 Container Service Developer Guide</em>.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-taskrolearn"></a><span class="term"><code class="code">TaskRoleArn</code></span></dt>
                           
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of an AWS Identity and Access Management (IAM) role
                                 that grants containers in the task permission to call AWS APIs on your behalf. For
                                 more information, see <a href="http://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-iam-roles.html" target="_blank">IAM Roles for Tasks</a> in the <em>Amazon EC2 Container Service Developer Guide</em>.
                              </p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-placementconstraints"></a><span class="term"><code class="code">PlacementConstraints</code></span></dt>
                           
                           <dd>
                              
                              <p>The placement constraints for the tasks in the service.</p>
                              
                              <p><em>Required: </em>No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-ecs-taskdefinition-placementconstraints-taskdefinitionplacementconstraint.html">Amazon EC2 Container Service Service
                                    PlacementConstraint</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-ecs-taskdefinition-containerdefinition"></a><span class="term"><code class="code">ContainerDefinitions</code></span></dt>
                           
                           <dd>
                              
                              <p>A list of container definitions in
                                 JSON
                                 format that describes the containers that make up your task.
                              </p>
                              
                              <p><em>Required: </em>Yes
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-ecs-taskdefinition-containerdefinitions.html">Amazon EC2 Container Service TaskDefinition
                                    ContainerDefinitions</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div><h2 id="w2ab2c21c10d518c11">Return Value</h2><h3 id="w2ab2c21c10d518c11b2">Ref</h3><p>When the logical ID of this resource is provided to the <code class="code">Ref</code>
                        intrinsic function, <code class="code">Ref</code> returns
                        the
                        Amazon Resource Name (ARN).
                     </p><p>In the following example, the <code class="code">Ref</code> function returns the ARN of the
                        <code class="code">MyTaskDefinition</code> task, such as
                        <code class="code">arn:aws:ecs:us-west-2:123456789012:task/1abf0f6d-a411-4033-b8eb-a4eed3ad252a</code>.
                     </p><pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">{ &quot;Ref&quot;: &quot;MyTaskDefinition&quot; }</code></pre><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="w2ab2c21c10d518c13">Example</h2><p>The following example defines an Amazon ECS task definition, which includes two container
                        definitions and one volume definition.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-ecs-taskdefinition-example.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">&quot;taskdefinition&quot;: {
  &quot;Type&quot;: &quot;AWS::ECS::TaskDefinition&quot;,
  &quot;Properties&quot; : {
    &quot;ContainerDefinitions&quot; : [
    {
      &quot;Name&quot;: {&quot;Ref&quot;: &quot;AppName&quot;},
      &quot;MountPoints&quot;: [
        {
          &quot;SourceVolume&quot;: &quot;my-vol&quot;,
          &quot;ContainerPath&quot;: &quot;/var/www/my-vol&quot;
        }
      ],
      &quot;Image&quot;:&quot;amazon/amazon-ecs-sample&quot;,
      &quot;Cpu&quot;: &quot;10&quot;,
      &quot;PortMappings&quot;:[
        {
          &quot;ContainerPort&quot;: {&quot;Ref&quot;:&quot;AppContainerPort&quot;},
          &quot;HostPort&quot;: {&quot;Ref&quot;:&quot;AppHostPort&quot;}
        }
      ],
      &quot;EntryPoint&quot;: [
        &quot;/usr/sbin/apache2&quot;,
        &quot;-D&quot;,
        &quot;FOREGROUND&quot;
      ],
      &quot;Memory&quot;:&quot;500&quot;,
      &quot;Essential&quot;: &quot;true&quot;
    },
    {
      &quot;Name&quot;: &quot;busybox&quot;,
      &quot;Image&quot;: &quot;busybox&quot;,
      &quot;Cpu&quot;: &quot;10&quot;,
      &quot;EntryPoint&quot;: [
        &quot;sh&quot;,
        &quot;-c&quot;
      ],
      &quot;Memory&quot;: &quot;500&quot;,
      &quot;Command&quot;: [
        &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
      ],
      &quot;Essential&quot; : &quot;false&quot;,
      &quot;VolumesFrom&quot;: [
        {
          &quot;SourceContainer&quot;: {&quot;Ref&quot;:&quot;AppName&quot;}
        }
      ]
    }],
    &quot;Volumes&quot;: [
    {
      &quot;Host&quot;: {
        &quot;SourcePath&quot;: &quot;/var/lib/docker/vfs/dir/&quot;
      },
      &quot;Name&quot;: &quot;my-vol&quot;
    }]
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-ecs-taskdefinition-example.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="btn-copy-code-container"><div class="btn btn-copy-code">Copy</div></div><code class="nohighlight ">taskdefinition: 
  Type: &quot;AWS::ECS::TaskDefinition&quot;
  Properties: 
    ContainerDefinitions: 
      - 
        Name: 
          Ref: &quot;AppName&quot;
        MountPoints: 
          - 
            SourceVolume: &quot;my-vol&quot;
            ContainerPath: &quot;/var/www/my-vol&quot;
        Image: &quot;amazon/amazon-ecs-sample&quot;
        Cpu: &quot;10&quot;
        PortMappings: 
          - 
            ContainerPort: 
              Ref: &quot;AppContainerPort&quot;
            HostPort: 
              Ref: &quot;AppHostPort&quot;
        EntryPoint: 
          - &quot;/usr/sbin/apache2&quot;
          - &quot;-D&quot;
          - &quot;FOREGROUND&quot;
        Memory: &quot;500&quot;
        Essential: &quot;true&quot;
      - 
        Name: &quot;busybox&quot;
        Image: &quot;busybox&quot;
        Cpu: &quot;10&quot;
        EntryPoint: 
          - &quot;sh&quot;
          - &quot;-c&quot;
        Memory: &quot;500&quot;
        Command: 
          - &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
        Essential: &quot;false&quot;
        VolumesFrom: 
          - 
            SourceContainer: 
              Ref: &quot;AppName&quot;
    Volumes: 
      - 
        Host: 
          SourcePath: &quot;/var/lib/docker/vfs/dir/&quot;
        Name: &quot;my-vol&quot;</code></pre>
                        </div><h2 id="w2ab2c21c10d518c15">More Info</h2><p>For a complete sample template that shows how you can create an Amazon ECS cluster
                        and
                        service, see <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-ecs.html">Amazon EC2 Container Service Template Snippets</a>.
                     </p></div>
</body>
</html>