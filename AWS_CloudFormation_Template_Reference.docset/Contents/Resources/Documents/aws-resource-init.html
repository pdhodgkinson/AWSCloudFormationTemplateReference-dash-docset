<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-init">AWS::CloudFormation::Init</h1><p>Use the AWS::CloudFormation::Init type to include metadata on an Amazon EC2
                        instance for the cfn-init helper script. If your template calls the
                        cfn-init script, the script looks for resource metadata rooted in the
                        AWS::CloudFormation::Init metadata key. For more information about
                        cfn-init, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-init.html">cfn-init</a>.
                     </p><p>cfn-init supports all metadata types for Linux systems. It supports
                        metadata types for Windows with conditions that are described in the
                        sections that follow.
                     </p><p>For an example of using AWS::CloudFormation::Init and the cfn-init
                        helper script, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/deploying.applications.html">Deploying Applications on Amazon EC2 with AWS CloudFormation</a>.
                     </p><p>For an example that shows how to use cfn-init to create a Windows
                        stack, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-windows-stacks-bootstrapping.html">Bootstrapping AWS CloudFormation Windows Stacks</a>.
                     </p><h2 id="aws-resource-cloudformation-init-syntax">Syntax</h2><p>The configuration is separated into sections. The following template
                        snippet shows how you can attach metadata for cfn-init to an Amazon EC2
                        instance resource within the template.
                     </p><p>The metadata is organized into config keys, which you can group into
                        configsets. You can specify a configset when you call cfn-init in your
                        template. If you don&apos;t specify a configset, cfn-init looks for a single
                        config key named <em>config</em>.
                     </p><div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>The cfn-init helper script processes these configuration sections
                           in the following order: packages, groups, users, sources, files,
                           commands, and then services. If you require a different order,
                           separate your sections into different config keys, and then use a
                           configset that specifies the order in which the config keys should
                           be processed.
                        </p>
                     </div><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-cloudformation-init-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;Resources&quot;: {
  &quot;MyInstance&quot;: {
    &quot;Type&quot;: &quot;AWS::EC2::Instance&quot;,
    &quot;Metadata&quot; : {
      &quot;AWS::CloudFormation::Init&quot; : {
        &quot;config&quot; : {
          &quot;packages&quot; : {
            :
          },
          &quot;groups&quot; : {
            :
          },
          &quot;users&quot; : {
            :
          },
          &quot;sources&quot; : {
            :
          },
          &quot;files&quot; : {
            :
          },
          &quot;commands&quot; : {
            :
          },
          &quot;services&quot; : {
            :
          }
        }
      }
    },
    &quot;Properties&quot;: {
      :
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-cloudformation-init-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">Resources: 
  MyInstance: 
    Type: AWS::EC2::Instance
    Metadata: 
      AWS::CloudFormation::Init: 
        config: 
          packages: 
            :
          groups: 
            :
          users: 
            :
          sources: 
            :
          files: 
            :
          commands: 
            :
          services: 
            :
    Properties: 
      :</code></pre>
                        </div><h2 id="aws-resource-init-configsets">Configsets</h2><p>If you want to create more than one config key and to have cfn-init
                        process them in a specific order, create a configset that contains the
                        config keys in the desired order. 
                     </p><h3 id="w2ab1c21c10c57c24c13b4">Single Configset</h3><p>The following template snippet creates configsets named
                        <code class="code">ascending</code> and <code class="code">descending</code> that each
                        contain two config keys.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-cloudformation-init-configset-example1.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;AWS::CloudFormation::Init&quot; : {
    &quot;configSets&quot; : {
        &quot;ascending&quot; : [ &quot;config1&quot; , &quot;config2&quot; ],
        &quot;descending&quot; : [ &quot;config2&quot; , &quot;config1&quot; ]
    },
    &quot;config1&quot; : {
        &quot;commands&quot; : {
            &quot;test&quot; : {
                &quot;command&quot; : &quot;echo \&quot;$CFNTEST\&quot; &gt; test.txt&quot;,
                &quot;env&quot; : { &quot;CFNTEST&quot; : &quot;I come from config1.&quot; },
                &quot;cwd&quot; : &quot;~&quot;
            }
        }
    },
    &quot;config2&quot; : {
        &quot;commands&quot; : {
            &quot;test&quot; : {
                &quot;command&quot; : &quot;echo \&quot;$CFNTEST\&quot; &gt; test.txt&quot;,
                &quot;env&quot; : { &quot;CFNTEST&quot; : &quot;I come from config2&quot; },
                &quot;cwd&quot; : &quot;~&quot;
            }
        }
    }
}     </code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-cloudformation-init-configset-example1.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">AWS::CloudFormation::Init: 
  configSets: 
    ascending: 
      - &quot;config1&quot;
      - &quot;config2&quot;
    descending: 
      - &quot;config2&quot;
      - &quot;config1&quot;
  config1: 
    commands: 
      test: 
        command: &quot;echo \&quot;$CFNTEST\&quot; &gt; test.txt&quot;
        env: 
          CFNTEST: &quot;I come from config1.&quot;
        cwd: &quot;~&quot;
  config2: 
    commands: 
      test: 
        command: &quot;echo \&quot;$CFNTEST\&quot; &gt; test.txt&quot;
        env: 
          CFNTEST: &quot;I come from config2&quot;
        cwd: &quot;~&quot;</code></pre>
                        </div><h4 id="w2ab1c21c10c57c24c13b4b8">Related cfn-init Calls</h4><p>The following example calls to cfn-init refer to the preceding
                        example configsets. The example calls are abbreviated for
                        clarity, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-init.html">cfn-init</a>
                        for the complete syntax.
                     </p><div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>If a call to cfn-init specifies the
                                 <code class="code">ascending</code> configset:
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">cfn-init -c ascending</code></pre>
                              <p>the script processes <code class="code">config1</code> and then
                                 processes <code class="code">config2</code> and the test.txt file would
                                 contain the text <code class="code">I come from config2</code>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>If a call to cfn-init specifies the
                                 <code class="code">descending</code> configset:
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">cfn-init -c descending</code></pre>
                              <p>the script processes <code class="code">config2</code> and then
                                 processes <code class="code">config1</code> and the test.txt file would
                                 contain the text <code class="code">I come from config1</code>.
                              </p>
                              
                           </li>
                        </ul>
                     </div><h3 id="w2ab1c21c10c57c24c13b6">Multiple Configsets</h3><p>You can create multiple configsets, and call a series of them
                        using your cfn-init script. Each configset can contain a list of
                        config keys or references to other configsets. For example, the
                        following template snippet creates three configsets. The first
                        configset, <code class="code">test1</code>, contains one config key named
                        <code class="code">1</code>. The second configset, <code class="code">test2</code>,
                        contains a reference to the <code class="code">test1</code> configset and one
                        config key named <code class="code">2</code>. The third configset, default,
                        contains a reference to the configset <code class="code">test2</code>.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-cloudformation-init-configset-example2.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;AWS::CloudFormation::Init&quot; : {
    &quot;configSets&quot; : {
        &quot;test1&quot; : [ &quot;1&quot; ],
        &quot;test2&quot; : [ { &quot;ConfigSet&quot; : &quot;test1&quot; }, &quot;2&quot; ],
        &quot;default&quot; : [ { &quot;ConfigSet&quot; : &quot;test2&quot; } ]
    },
    &quot;1&quot; : {
        &quot;commands&quot; : {
            &quot;test&quot; : {
                &quot;command&quot; : &quot;echo \&quot;$MAGIC\&quot; &gt; test.txt&quot;,
                &quot;env&quot; : { &quot;MAGIC&quot; : &quot;I come from the environment!&quot; },
                &quot;cwd&quot; : &quot;~&quot;
            }
        }
    },
    &quot;2&quot; : {
        &quot;commands&quot; : {
            &quot;test&quot; : {
                &quot;command&quot; : &quot;echo \&quot;$MAGIC\&quot; &gt;&gt; test.txt&quot;,
                &quot;env&quot; : { &quot;MAGIC&quot; : &quot;I am test 2!&quot; },
                &quot;cwd&quot; : &quot;~&quot;
            }
        }
    }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-cloudformation-init-configset-example2.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">AWS::CloudFormation::Init: 
  1: 
    commands: 
      test: 
        command: &quot;echo \&quot;$MAGIC\&quot; &gt; test.txt&quot;
        env: 
          MAGIC: &quot;I come from the environment!&quot;
        cwd: &quot;~&quot;
  2: 
    commands: 
      test: 
        command: &quot;echo \&quot;$MAGIC\&quot; &gt;&gt; test.txt&quot;
        env: 
          MAGIC: &quot;I am test 2!&quot;
        cwd: &quot;~&quot;
  configSets: 
    test1: 
      - &quot;1&quot;
    test2: 
      - 
        ConfigSet: &quot;test1&quot;
      - &quot;2&quot;
    default: 
      - 
        ConfigSet: &quot;test2&quot;
</code></pre>
                        </div><h4 id="w2ab1c21c10c57c24c13b6b8">Related cfn-init Calls</h4><p>The following calls to cfn-init refer to the configSets
                        declared in the preceding template snippet. The example calls are
                        abbreviated for clarity, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-init.html">cfn-init</a> for the complete syntax.
                     </p><div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>If you specify <code class="code">test1</code> only:
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">cfn-init -c test1</code></pre>
                              <p>cfn-init processes config key <code class="code">1</code>
                                 only.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>If you specify <code class="code">test2</code> only:
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">cfn-init -c test2</code></pre>
                              <p>cfn-init processes config key <code class="code">1</code> and then
                                 processes config key <code class="code">2</code>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>If you specify the <code class="code">default</code> configset (or no
                                 configsets at all):
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">cfn-init -c default</code></pre>
                              <p>you get the same behavior that you would if you specify
                                 configset <code class="code">test2</code>.
                              </p>
                              
                           </li>
                        </ul>
                     </div><h2 id="aws-resource-init-commands">Commands</h2><p>You can use the commands key to execute commands on the EC2
                        instance. The commands are processed in alphabetical order by
                        name.
                     </p><div class="table">
                        <div class="table-contents">
                           <table id="w746ab1c21c10c57c24c15b4">
                              
                              <tr>
                                 
                                 <th>Key</th>
                                 
                                 <th>Description</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>command</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Required. Either an array or a string specifying the
                                       command to run. If you use an array, you do not need to
                                       escape space characters or enclose command parameters in
                                       quotes. Don&apos;t use the array to specify multiple
                                       commands.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>env</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Optional. Sets environment variables for the command.
                                       This property overwrites, rather than appends, the
                                       existing environment.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>cwd</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Optional. The working directory</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>test</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Optional. A test command that determines whether
                                       cfn-init runs commands that are specified in the command
                                       key. If the test passes, cfn-init runs the commands. The
                                       cfn-init script runs the test in a command interpreter,
                                       such as Bash or <code>cmd.exe</code>. Whether a
                                       test passes depends on the exit code that the
                                       interpreter returns.
                                    </p>
                                    
                                    <p>For Linux, the test command must return an exit code
                                       of <code class="code">0</code> for the test to pass. For Windows, the
                                       test command must return an %ERRORLEVEL% of
                                       <code class="code">0</code>.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>ignoreErrors</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Optional. A Boolean value that determines whether
                                       cfn-init continues to run if the command in contained in
                                       the command key fails (returns a non-zero value). Set to
                                       <code class="code">true</code> if you want cfn-init to continue
                                       running even if the command fails. Set to
                                       <code class="code">false</code> if you want cfn-init to stop
                                       running if the command fails. The default value is
                                       <code class="code">false</code>.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>waitAfterCompletion</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Optional. For Windows systems only. Specifies how
                                       long to wait (in seconds) after a command has finished
                                       in case the command causes a reboot. The default value
                                       is 60 seconds and a value of &quot;forever&quot; directs cfn-init
                                       to exit and resume only after the reboot is complete.
                                       Set this value to <code class="code">0</code> if you do not want to
                                       wait for every command.
                                       
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </table>
                        </div>
                     </div><h3 id="w2ab1c21c10c57c24c15b6">Example</h3><p>The following example snippet calls the echo command if the
                        <code class="code">~/test.txt</code> file doesn&apos;t exist.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-init-commands-example.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;commands&quot; : {
    &quot;test&quot; : {
        &quot;command&quot; : &quot;echo \&quot;$MAGIC\&quot; &gt; test.txt&quot;,
        &quot;env&quot; : { &quot;MAGIC&quot; : &quot;I come from the environment!&quot; },
        &quot;cwd&quot; : &quot;~&quot;,
        &quot;test&quot; : &quot;test ! -e ~/test.txt&quot;,
        &quot;ignoreErrors&quot; : &quot;false&quot;
    },
    &quot;test2&quot; : {
        &quot;command&quot; : &quot;echo \&quot;$MAGIC2\&quot; &gt; test2.txt&quot;,
        &quot;env&quot; : { &quot;MAGIC2&quot; : &quot;I come from the environment!&quot; },
        &quot;cwd&quot; : &quot;~&quot;,
        &quot;test&quot; : &quot;test ! -e ~/test2.txt&quot;,
        &quot;ignoreErrors&quot; : &quot;false&quot;
    }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-init-commands-example.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">commands: 
  test: 
    command: &quot;echo \&quot;$MAGIC\&quot; &gt; test.txt&quot;
    env: 
      MAGIC: &quot;I come from the environment!&quot;
    cwd: &quot;~&quot;
    test: &quot;test ! -e ~/test.txt&quot;
    ignoreErrors: &quot;false&quot;
  test2: 
    command: &quot;echo \&quot;$MAGIC2\&quot; &gt; test2.txt&quot;
    env: 
      MAGIC2: &quot;I come from the environment!&quot;
    cwd: &quot;~&quot;
    test: &quot;test ! -e ~/test2.txt&quot;
    ignoreErrors: &quot;false&quot;</code></pre>
                        </div><h2 id="aws-resource-init-files">Files</h2><p>You can use the <code class="code">files</code> key to create files on the EC2
                        instance. The content can be either inline in the template or the
                        content can be pulled from a URL. The files are written to disk in
                        lexicographic order. The following table lists the supported
                        keys.
                     </p><div class="table">
                        <div class="table-contents">
                           <table id="w746ab1c21c10c57c24c17b4">
                              
                              <tr>
                                 
                                 <th>Key</th>
                                 
                                 <th>Description</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>content</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Either a string or a properly formatted JSON object.
                                       If you use a JSON object as your content, the JSON will
                                       be written to a file on disk. Any intrinsic functions
                                       such as Fn::GetAtt or Ref are evaluated before the JSON
                                       object is written to disk. When you create a symlink,
                                       specify the symlink target as the content.
                                    </p>
                                    
                                    <div class="aws-note">
                                       <p class="aws-note">Note</p>
                                       <p>If you create a symlink, the helper script
                                          modifies the permissions of the target file.
                                          Currently, you can&apos;t create a symlink without
                                          modifying the permissions of the target file.
                                       </p>
                                    </div>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>source</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>A URL to load the file from. This option cannot be
                                       specified with the content key.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>encoding</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>The encoding format. Only used if the content is a
                                       string. Encoding is not applied if you are using a
                                       source.
                                    </p>
                                    
                                    <p>Valid values: <code class="code">plain</code> |
                                       <code class="code">base64</code></p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>group</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>The name of the owning group for this file. Not
                                       supported for Windows systems.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>owner</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>The name of the owning user for this file. Not
                                       supported for Windows systems.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>mode</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>A six-digit octal value representing the mode for
                                       this file. Not supported for Windows systems. Use the
                                       first three digits for symlinks and the last three
                                       digits for setting permissions. To create a symlink,
                                       specify
                                       <strong class="userinput"><code>120<em class="replaceable"><code>xxx</code></em></code></strong>,
                                       where <code class="code">xxx</code> defines the permissions of the
                                       target file. To specify permissions for a file, use the
                                       last three digits, such as
                                       <strong class="userinput"><code>000644</code></strong>.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>authentication</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>The name of an authentication method to use. This
                                       overrides any default authentication. You can use this
                                       property to select an authentication method you define
                                       with the <a href="aws-resource-authentication.html">AWS::CloudFormation::Authentication</a>
                                       resource.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>context</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Specifies a context for files that are to be
                                       processed as <a href="http://mustache.github.com/mustache.5.html" target="_blank">Mustache templates</a>. To use this key, you
                                       must have installed aws-cfn-bootstrap 1.3-11 or later as
                                       well as <a href="https://github.com/defunkt/pystache" target="_blank">pystache</a>.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </table>
                        </div>
                     </div><h3 id="w2ab1c21c10c57c24c17b6">Examples</h3><p>The following example snippet creates a file named setup.mysql as
                        part of a larger installation.
                     </p><div class="example">
                        <p class="title"><b>Example JSON</b></p>
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;files&quot; : {
  &quot;/tmp/setup.mysql&quot; : {
    &quot;content&quot; : { &quot;Fn::Join&quot; : [&quot;&quot;, [
      &quot;CREATE DATABASE &quot;, { &quot;Ref&quot; : &quot;DBName&quot; }, &quot;;\n&quot;,
      &quot;CREATE USER &apos;&quot;, { &quot;Ref&quot; : &quot;DBUsername&quot; }, &quot;&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;&quot;,
                       { &quot;Ref&quot; : &quot;DBPassword&quot; }, &quot;&apos;;\n&quot;,
      &quot;GRANT ALL ON &quot;, { &quot;Ref&quot; : &quot;DBName&quot; }, &quot;.* TO &apos;&quot;, { &quot;Ref&quot; : &quot;DBUsername&quot; },
                       &quot;&apos;@&apos;localhost&apos;;\n&quot;,
      &quot;FLUSH PRIVILEGES;\n&quot;
      ]]},
    &quot;mode&quot;  : &quot;000644&quot;,
    &quot;owner&quot; : &quot;root&quot;,
    &quot;group&quot; : &quot;root&quot;
  }
}</code></pre></div>
                     </div><div class="example">
                        <p class="title"><b>Example YAML</b></p>
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">files: 
  /tmp/setup.mysql: 
    content: !Sub | 
      CREATE DATABASE ${DBName};
      CREATE USER &apos;${DBUsername}&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;${DBPassword}&apos;;
      GRANT ALL ON ${DBName}.* TO &apos;${DBUsername}&apos;@&apos;localhost&apos;;
      FLUSH PRIVILEGES;
    mode: &quot;000644&quot;
    owner: &quot;root&quot;
    group: &quot;root&quot;</code></pre></div>
                     </div><p>The full template is available at: <a href="https://s3.amazonaws.com/cloudformation-templates-us-east-1/Drupal_Single_Instance.template" target="_blank">https://s3.amazonaws.com/cloudformation-templates-us-east-1/Drupal_Single_Instance.template</a></p><p>The following example snippet creates a symlink
                        <code class="code">/tmp/myfile2.txt</code> that points at an existing file
                        <code class="code">/tmp/myfile1.txt</code>. The permissions of the target file
                        <code class="code">/tmp/myfile1.txt</code> is defined by the mode value
                        <code class="code">644</code>. 
                     </p><div class="example">
                        <p class="title"><b>Example JSON</b></p>
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;files&quot; : {
  &quot;/tmp/myfile2.txt&quot; : {
    &quot;content&quot; : &quot;/tmp/myfile1.txt&quot;,
    &quot;mode&quot; : &quot;120644&quot;
  }
}</code></pre></div>
                     </div><div class="example">
                        <p class="title"><b>Example YAML</b></p>
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">files: 
  /tmp/myfile2.txt: 
    content: &quot;/tmp/myfile1.txt&quot;
    mode: &quot;120644&quot;</code></pre></div>
                     </div><p>Mustache templates are used primarily to create configuration
                        files. For example, you can store a configuration file in an S3
                        bucket and interpolate Refs and GetAtts from the template, instead
                        of using <a href="intrinsic-function-reference-join.html">Fn::Join</a>. The
                        following example snippet outputs &quot;Content for test9&quot; to
                        <code>/tmp/test9.txt</code>.
                     </p><div class="example">
                        <p class="title"><b>Example JSON</b></p>
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
&quot;files&quot; : {
    &quot;/tmp/test9.txt&quot; : {
        &quot;content&quot; : &quot;Content for {{name}}&quot;,
        &quot;context&quot; : { &quot;name&quot; : &quot;test9&quot; }
    }
} </code></pre></div>
                     </div><div class="example">
                        <p class="title"><b>Example YAML</b></p>
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">files: 
  /tmp/test9.txt: 
    content: &quot;Content for {{name}}&quot;
    context: 
      name: &quot;test9&quot;</code></pre></div>
                     </div><p>When working with Mustache templates, note the following:</p><div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>The context key must be present for the files to be
                                 processed.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>The context key must be a key-value map, but it can be
                                 nested.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>You can process files with inline content by using the
                                 content key and remote files by using the source key. 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Mustache support depends on the pystache version. Version
                                 0.5.2 supports the <a href="https://github.com/mustache/spec/tree/v1.1.2" target="_blank">Mustache
                                    1.1.2 specification</a>. 
                              </p>
                              
                           </li>
                        </ul>
                     </div><h2 id="aws-resource-init-groups">Groups</h2><p>You can use the groups key to create Linux/UNIX groups and to assign
                        group IDs. The groups key is not supported for Windows systems.
                     </p><p>To create a group, add a new key-value pair that maps a new group
                        name to an optional group ID. The groups key can contain one or more
                        group names. The following table lists the available keys.
                     </p><div class="table">
                        <div class="table-contents">
                           <table id="w746ab1c21c10c57c24c19b6">
                              
                              <tr>
                                 
                                 <th>Key</th>
                                 
                                 <th>Description</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">gid</code></p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>A group ID number.</p>
                                    
                                    <p>If a group ID is specified, and the group already
                                       exists by name, the group creation will fail. If another
                                       group has the specified group ID, the OS may reject the
                                       group creation.
                                    </p>
                                    
                                    <p>Example: <code class="code">{ &quot;gid&quot; : &quot;23&quot; }</code></p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </table>
                        </div>
                     </div><h3 id="aws-resource-init-groups-snippet">Example snippet</h3><p>The following snippet specifies a group named
                        <code class="code">groupOne</code> without assigning a group ID and a group
                        named <code class="code">groupTwo</code> that specified a group ID value of
                        <code class="code">45</code>.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-init-groups-snippet.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;groups&quot; : {
    &quot;groupOne&quot; : {},
    &quot;groupTwo&quot; : { &quot;gid&quot; : &quot;45&quot; }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-init-groups-snippet.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">groups: 
  groupOne: {}
  groupTwo: 
    gid: &quot;45&quot;</code></pre>
                        </div><h2 id="aws-resource-init-packages">Packages</h2><p>You can use the packages key to download and install pre-packaged
                        applications and components. On Windows systems, the packages key
                        supports only the MSI installer.
                     </p><h3 id="aws-resource-init-packages-formats">Supported package formats</h3><p>The cfn-init script currently supports the following package
                        formats: apt, msi, python, rpm, rubygems, and yum. Packages are
                        processed in the following order: rpm, yum/apt, and then rubygems
                        and python. There is no ordering between rubygems and python, and
                        packages within each package manager are not guaranteed to be
                        installed in any order.
                     </p><h3 id="aws-resource-init-packages-versions">Specifying versions</h3><p>Within each package manager, each package is specified as a
                        package name and a list of versions. The version can be a string, a
                        list of versions, or an empty string or list. An empty string or
                        list indicates that you want the latest version. For rpm manager,
                        the version is specified as a path to a file on disk or a
                        URL.
                     </p><p>If you specify a version of a package, cfn-init will attempt to
                        install that version even if a newer version of the package is
                        already installed on the instance. Some package managers support
                        multiple versions, but others may not. Please check the
                        documentation for your package manager for more information. If you
                        do not specify a version and a version of the package is already
                        installed, the cfn-init script will not install a new
                        version&#x2014;it will assume that you want to keep and use the
                        existing version.
                     </p><h3 id="aws-resource-init-packages-snippet">Example snippets</h3><h4 id="w2ab1c21c10c57c24c21b8b2">RPM, yum, and Rubygems</h4><p>The following snippet specifies a version URL for rpm,
                        requests the latest versions from yum, and version 0.10.2 of chef
                        from rubygems:
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h5 id="aws-resource-init-packages-example1.json">JSON</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;rpm&quot; : {
  &quot;epel&quot; : &quot;http://download.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm&quot;
},
&quot;yum&quot; : {
  &quot;httpd&quot; : [],
  &quot;php&quot; : [],
  &quot;wordpress&quot; : []
},
&quot;rubygems&quot; : {
  &quot;chef&quot; : [ &quot;0.10.2&quot; ]
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h5 id="aws-resource-init-packages-example1.yaml">YAML</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">rpm: 
  epel: &quot;http://download.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm&quot;
yum: 
  httpd: []
  php: []
  wordpress: []
rubygems: 
  chef: 
    - &quot;0.10.2&quot;</code></pre>
                        </div><h4 id="w2ab1c21c10c57c24c21b8b4">MSI Package</h4><p>The following snippet specifies a URL for an MSI
                        package:
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h5 id="aws-resource-init-packages-example2.json">JSON</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;msi&quot; : {
  &quot;awscli&quot; : &quot;https://s3.amazonaws.com/aws-cli/AWSCLI64.msi&quot;
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h5 id="aws-resource-init-packages-example2.yaml">YAML</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">msi: 
  awscli: &quot;https://s3.amazonaws.com/aws-cli/AWSCLI64.msi&quot;</code></pre>
                        </div><h2 id="aws-resource-init-services">Services</h2><p>You can use the services key to define which services should be
                        enabled or disabled when the instance is launched. On Linux systems,
                        this key is supported by using sysvinit. On Windows systems, it is
                        supported by using the Windows service manager.
                     </p><p>The services key also allows you to specify dependencies on sources,
                        packages and files so that if a restart is needed due to files being
                        installed, cfn-init will take care of the service restart. For example,
                        if you download the Apache HTTP Server package, the package
                        installation will automatically start the Apache HTTP Server during the
                        stack creation process. However, if the Apache HTTP Server
                        configuration is updated later in the stack creation process, the
                        update won&apos;t take effect unless the Apache server is restarted. You can
                        use the services key to ensure that the Apache HTTP service is
                        restarted.
                     </p><p>The following table lists the supported keys.</p><div class="table">
                        <div class="table-contents">
                           <table id="w746ab1c21c10c57c24c23b8">
                              
                              <tr>
                                 
                                 <th>Key</th>
                                 
                                 <th>Description</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>ensureRunning</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Set to true to ensure that the service is running
                                       after cfn-init finishes.
                                    </p>
                                    
                                    <p>Set to false to ensure that the service is not
                                       running after cfn-init finishes.
                                    </p>
                                    
                                    <p>Omit this key to make no changes to the service
                                       state.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>enabled</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Set to true to ensure that the service will be
                                       started automatically upon boot.
                                    </p>
                                    
                                    <p>Set to false to ensure that the service will not be
                                       started automatically upon boot.
                                    </p>
                                    
                                    <p>Omit this key to make no changes to this
                                       property.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>files</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>A list of files. If cfn-init changes one directly via
                                       the files block, this service will be restarted
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>sources</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>A list of directories. If cfn-init expands an archive
                                       into one of these directories, this service will be
                                       restarted.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>packages</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>A map of package manager to list of package names. If
                                       cfn-init installs or updates one of these packages, this
                                       service will be restarted.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>commands</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>A list of command names. If cfn-init runs the
                                       specified command, this service will be
                                       restarted.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </table>
                        </div>
                     </div><h3 id="w2ab1c21c10c57c24c23c10">Examples</h3><h4 id="w2ab1c21c10c57c24c23c10b2">Linux</h4><p>The following Linux snippet configures the services as
                        follows:
                     </p><div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>The nginx service will be restarted if either
                                 /etc/nginx/nginx.conf or /var/www/html are modified by
                                 cfn-init.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>The php-fastcgi service will be restarted if cfn-init
                                 installs or updates php or spawn-fcgi using yum.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>The sendmail service will be stopped and
                                 disabled.
                              </p>
                              
                           </li>
                        </ul>
                     </div><div id="JSON" name="JSON" class="section langfilter">
                        <h5 id="aws-resource-init-services-example1.json">JSON</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;services&quot; : {
  &quot;sysvinit&quot; : {
    &quot;nginx&quot; : {
      &quot;enabled&quot; : &quot;true&quot;,
      &quot;ensureRunning&quot; : &quot;true&quot;,
      &quot;files&quot; : [&quot;/etc/nginx/nginx.conf&quot;],
      &quot;sources&quot; : [&quot;/var/www/html&quot;]
    },
    &quot;php-fastcgi&quot; : {
      &quot;enabled&quot; : &quot;true&quot;,
      &quot;ensureRunning&quot; : &quot;true&quot;,
      &quot;packages&quot; : { &quot;yum&quot; : [&quot;php&quot;, &quot;spawn-fcgi&quot;] }
    },
    &quot;sendmail&quot; : {
      &quot;enabled&quot; : &quot;false&quot;,
      &quot;ensureRunning&quot; : &quot;false&quot;
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h5 id="aws-resource-init-services-example1.yaml">YAML</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">services: 
  sysvinit: 
    nginx: 
      enabled: &quot;true&quot;
      ensureRunning: &quot;true&quot;
      files: 
        - &quot;/etc/nginx/nginx.conf&quot;
      sources: 
        - &quot;/var/www/html&quot;
    php-fastcgi: 
      enabled: &quot;true&quot;
      ensureRunning: &quot;true&quot;
      packages: 
        yum: 
          - &quot;php&quot;
          - &quot;spawn-fcgi&quot;
    sendmail: 
      enabled: &quot;false&quot;
      ensureRunning: &quot;false&quot;</code></pre>
                        </div><h4 id="w2ab1c21c10c57c24c23c10b4">Windows</h4><p>The following Windows snippet starts the <code class="code">cfn-hup</code>
                        service, sets it to automatic, and restarts the service if
                        <code class="code">cfn-init</code> modifies the specified configuration
                        files:
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h5 id="aws-resource-init-services-example2.json">JSON</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;services&quot; : {
  &quot;windows&quot; : {
    &quot;cfn-hup&quot; : {
      &quot;enabled&quot; : &quot;true&quot;,
      &quot;ensureRunning&quot; : &quot;true&quot;,
      &quot;files&quot; : [&quot;c:\\cfn\\cfn-hup.conf&quot;, &quot;c:\\cfn\\hooks.d\\cfn-auto-reloader.conf&quot;]
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h5 id="aws-resource-init-services-example2.yaml">YAML</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">services: 
  windows: 
    cfn-hup: 
      enabled: &quot;true&quot;
      ensureRunning: &quot;true&quot;
      files: 
        - &quot;c:\\cfn\\cfn-hup.conf&quot;
        - &quot;c:\\cfn\\hooks.d\\cfn-auto-reloader.conf&quot;</code></pre>
                        </div><h2 id="aws-resource-init-sources">Sources</h2><p>You can use the sources key to download an archive file and unpack
                        it in a target directory on the EC2 instance. This key is fully
                        supported for both Linux and Windows systems.
                     </p><p class="title"><b>Supported formats</b></p><p>Supported formats are tar, tar+gzip, tar+bz2 and zip.</p><h3 id="w2ab1c21c10c57c24c25b6">Examples</h3><h4 id="w2ab1c21c10c57c24c25b6b2">GitHub</h4><p>If you use GitHub as a source control system, you can use
                        cfn-init and the sources package mechanism to pull a specific
                        version of your application. GitHub allows you to create a zip or
                        a tar from a specific version via a URL as follows:
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">https://github.com/&lt;your directory&gt;/(zipball|tarball)/&lt;version&gt; </code></pre><p>For example, the following snippet pulls down version
                        <em>master</em> as a <code>.tar</code>
                        file.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h5 id="aws-resource-init-sources-example1.json">JSON</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;sources&quot; : {
  &quot;/etc/puppet&quot; : &quot;https://github.com/user1/cfn-demo/tarball/master&quot;
  }</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h5 id="aws-resource-init-sources-example1.yaml">YAML</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">sources: 
  /etc/puppet: &quot;https://github.com/user1/cfn-demo/tarball/master&quot;</code></pre>
                        </div><h4 id="w2ab1c21c10c57c24c25b6b4">S3 Bucket</h4><p>The following example downloads a zip file from an Amazon S3
                        bucket and unpacks it into /etc/myapp:
                     </p><div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>You can use authentication credentials for a source.
                           However, you cannot put an authentication key in the sources
                           block. Instead, include a buckets key in your S3AccessCreds
                           block. <span>For an example, see the
                              <a href="https://s3.amazonaws.com/cloudformation-templates-us-east-1/S3Bucket_SourceAuth.template" target="_blank">example template</a>. </span>For more information
                           on Amazon S3 authentication credentials, see <a href="aws-resource-authentication.html">AWS::CloudFormation::Authentication</a>.
                        </p>
                     </div><div id="JSON" name="JSON" class="section langfilter">
                        <h5 id="aws-resource-init-sources-example2.json">JSON</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;sources&quot; : {
  &quot;/etc/myapp&quot; : &quot;https://s3.amazonaws.com/mybucket/myapp.tar.gz&quot;
  }</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h5 id="aws-resource-init-sources-example2.yaml">YAML</h5>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">sources: 
  /etc/myapp: &quot;https://s3.amazonaws.com/mybucket/myapp.tar.gz&quot;</code></pre>
                        </div><h2 id="aws-resource-init-users">Users</h2><p>You can use the users key to create Linux/UNIX users on the EC2
                        instance. The users key is not supported for Windows systems.
                     </p><p>The following table lists the supported keys.</p><div class="table">
                        <div class="table-contents">
                           <table id="w746ab1c21c10c57c24c27b6">
                              
                              <tr>
                                 
                                 <th>Key</th>
                                 
                                 <th>Description</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>uid</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>A user ID. The creation process fails if the user
                                       name exists with a different user ID. If the user ID is
                                       already assigned to an existing user the operating
                                       system may reject the creation request.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>groups</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>A list of group names. The user will be added to each
                                       group in the list.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>homeDir</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>The user&apos;s home directory.</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </table>
                        </div>
                     </div><h3 id="w2ab1c21c10c57c24c27b8">Example</h3><p>Users are created as non-interactive system users with a shell of
                        /sbin/nologin. This is by design and cannot be modified.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-init-users-example.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
&quot;users&quot; : {
    &quot;myUser&quot; : {
        &quot;groups&quot; : [&quot;groupOne&quot;, &quot;groupTwo&quot;],
        &quot;uid&quot; : &quot;50&quot;,
        &quot;homeDir&quot; : &quot;/tmp&quot;
    }
}     </code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-init-users-example.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">users: 
  myUser: 
    groups: 
      - &quot;groupOne&quot;
      - &quot;groupTwo&quot;
    uid: &quot;50&quot;
    homeDir: &quot;/tmp&quot;</code></pre>
                        </div></div>
</body>
</html>